(this["webpackJsonpgreencom-front"]=this["webpackJsonpgreencom-front"]||[]).push([[0],{149:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),c=n(19),r=n.n(c),i=(n(76),n(32)),s=n(33),d=n(37),l=n(36),u=n(2),j=n(66),b=n(67),p=n(5),O=n(34),h=n(4),m=n.n(h),f=n(8),v=n(68),x=n.n(v),g="https://greencomapi.azurewebsites.net";function w(e,t){var n=Object(o.useState)((function(){return function(e,t){return JSON.parse(localStorage.getItem(e))||t}(e,t)})),a=Object(u.a)(n,2),c=a[0],r=a[1];return Object(o.useEffect)((function(){localStorage.setItem(e,JSON.stringify(c))}),[c]),[c,r]}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=Object(o.useState)([]),c=Object(u.a)(a,2),r=c[0],i=c[1],s=w("token",null),d=Object(u.a)(s,2),l=d[0];d[1];return Object(o.useEffect)((function(){if(""!==t){var n={produto:e,periodo:t};m()({method:"GET",headers:{Authorization:"Token "+l},url:"https://greencomapi.azurewebsites.net/periodos",params:n}).then((function(e){i(e.data.dados)}))}}),[e,t,n]),{dadosPeriodo:r}}var N=n(0),k=function(){var e=Object(o.useRef)(null),t=w("username",null),n=Object(u.a)(t,1)[0],a=w("isRep",null),c=[{label:"Conta",icon:"pi pi-user",url:"/conta"},{label:"Pedidos",icon:"pi pi-upload",url:"/pedidos"}];Object(u.a)(a,1)[0]&&(c.push({label:"Promocoes",icon:"pi pi-external-link",url:"/promocoes"}),c.push({label:"Clientes",icon:"pi pi-external-link",url:"/clientes"}));var r=[{label:n,items:c}];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(b.Menu,{model:r,popup:!0,ref:e,id:"popup_menu"}),Object(N.jsx)(p.Button,{icon:"pi pi-user",onClick:function(t){return e.current.toggle(t)},"aria-controls":"popup_menu","aria-haspopup":!0})]})};function S(e){var t=w("categorias",[]),n=Object(u.a)(t,1)[0],a=Object(o.useState)(""),c=Object(u.a)(a,2),r=c[0],i=c[1],s=Object(N.jsx)("a",{href:"/",children:Object(N.jsx)("img",{alt:"logo",src:"https://ondasstr092020.blob.core.windows.net/modelo/logo.png",height:"40",className:"p-mr-2"})}),d=Object(N.jsx)("a",{href:"/login",children:"Login"});return e.loggedIn&&(d=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(O.InputText,{onChange:function(e){i(e.target.value),e.target.value.length>=13&&/^\d+$/.test(e.target.value)&&(e.preventDefault(),window.location="/busca?query="+e.target.value,i(""))},placeholder:"Buscar",type:"text"}),Object(N.jsx)(p.Button,{onClick:function(e){""!==r&&(e.preventDefault(),window.location="/busca?query="+r,i(""))},icon:"pi pi-search",className:"p-button-rounded p-button-secondary"}),Object(N.jsx)(p.Button,{icon:"pi pi-shopping-cart",onClick:function(e){return window.location.href="/carrinho"},"aria-controls":"popup_menu","aria-haspopup":!0}),Object(N.jsx)(k,{})]})),Object(N.jsx)("div",{children:Object(N.jsx)("div",{className:"card",children:Object(N.jsx)(j.Menubar,{model:n,start:s,end:d})})})}var C=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={banners:[]},o}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.updateBanners(),document.title="Greenish B2B"}},{key:"updateBanners",value:function(){var e=this;m()({method:"GET",url:"https://greencomapi.azurewebsites.net/home"}).then((function(t){e.setState({banners:t.data.banners}),console.log(e.state.banners)}))}},{key:"render",value:function(){var e=this.state.banners.slice().map((function(e,t){return Object(N.jsx)("a",{href:e.url,children:Object(N.jsx)("img",{src:e.img})})}));return Object(N.jsx)("div",{children:e})}}]),n}(a.a.Component),y=n(27),B=(n(43),n(17));function I(e){var t=Object(o.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],r=Object(o.useState)(""),i=Object(u.a)(r,2),s=i[0],d=i[1],l=w("token",null),j=Object(u.a)(l,2),b=(j[0],j[1]),h=w("loggedin",null),f=Object(u.a)(h,2)[1],v=w("clienteId",null),x=Object(u.a)(v,2)[1],_=w("clienteNome",null),k=Object(u.a)(_,2)[1],S=w("isRep",null),C=Object(u.a)(S,2),I=(C[0],C[1]),T=w("username",null),A=Object(u.a)(T,2)[1],P=w("carrinhoId",null),E=Object(u.a)(P,2)[1],q=w("categorias",[]),z=Object(u.a)(q,2)[1],R=w("colecoes",[]),G=Object(u.a)(R,2)[1],D=w("periodos",[]),F=Object(u.a)(D,2)[1],L=Object(o.useRef)(null);Object(o.useEffect)((function(){document.title="Greenish B2B | Login"}),[]);return Object(N.jsxs)("div",{children:[Object(N.jsx)(B.Messages,{ref:L}),Object(N.jsxs)("div",{className:"p-field",children:[Object(N.jsx)("label",{htmlFor:"login",children:"Login"}),Object(N.jsx)(O.InputText,{id:"login",value:a,onChange:function(e){return c(e.target.value)}})]}),Object(N.jsxs)("div",{className:"p-field",children:[Object(N.jsx)("label",{htmlFor:"senha",children:"Senha"}),Object(N.jsx)(y.Password,{id:"senha",value:s,onChange:function(e){return d(e.target.value)},feedback:!1})]}),Object(N.jsx)(p.Button,{label:"Entrar",onClick:function(){return function(){var e=new FormData;e.append("username",a),e.append("password",s),m.a.post(g+"/api-token-auth/",e).then((function(e){var t={headers:{Authorization:"Token "+e.data.token}};b(e.data.token),m.a.get(g+"/login",t).then((function(e){f(!0),x(e.data.clienteId),k(e.data.clienteNome),I(e.data.isRep),A(e.data.username),E(null),z(e.data.cats),G(e.data.colecoes),F(e.data.periodos),window.location.href="/"}))})).catch((function(e){L.current.show([{severity:"error",summary:"Usuario ou senha Incorretos",sticky:!1}]),c(""),d("")}))}()}})]})}var T=n(25);function A(e){var t=Object(o.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],r=w("token",null),i=Object(u.a)(r,2),s=i[0],d=(i[1],w("clienteId",null)),l=Object(u.a)(d,2)[1],j=w("clienteNome",null),b=Object(u.a)(j,2)[1],O=w("carrinhoId",null),h=Object(u.a)(O,2),f=h[0],v=h[1];Object(o.useEffect)((function(){_(),document.title="Greenish B2B | Clientes"}),[]);var x=function(e,t){m()({method:"GET",headers:{Authorization:"Token "+s},url:g+"/pedidos/deleta/"+f}),l(e),b(t),v(null),window.location.href="/"},_=function(){m()({method:"GET",headers:{Authorization:"Token "+s},url:"https://greencomapi.azurewebsites.net/clientes"}).then((function(e){c(e.data.clientes)}))},k=a.slice().map((function(e,t){return Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{children:e.nome+" - "+e.tabela_precos}),Object(N.jsx)(p.Button,{label:"Selecionar",onClick:function(){return t=e.id,n=e.nome,void Object(T.confirmDialog)({message:"Itens nao salvos no carrinho serao apagados. Confirma alteracao?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return x(t,n)}});var t,n}})]})}));return Object(N.jsx)("div",{children:k})}var P=n(70),E=n(14);function q(e){var t=Object(o.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],r=w("carrinhoId",null),i=Object(u.a)(r,2),s=i[0],d=i[1],l=w("clienteId",null),j=Object(u.a)(l,2)[1],b=w("clienteNome",null),O=Object(u.a)(b,2)[1],h=w("isRep",null),f=Object(u.a)(h,1)[0],v=w("token",null),x=Object(u.a)(v,2),_=x[0],k=(x[1],Object(o.useState)(!1)),S=Object(u.a)(k,2),C=S[0],y=S[1],I=Object(o.useRef)(null);Object(o.useEffect)((function(){q(),document.title="Greenish B2B | Pedidos"}),[]);var A=function(e,t,n){m()({method:"GET",url:g+"/pedidos/retoma/"+e,headers:{Authorization:"Token "+_},params:{carrinhoAtualId:s}}).then((function(o){o.data.confirmed?(d(e),j(t),O(n),window.location.href="/carrinho"):I.current.show([{severity:"error",summary:o.data.message,sticky:!1}])}))},q=function(){m()({method:"GET",url:"https://greencomapi.azurewebsites.net/pedidos",headers:{Authorization:"Token "+_}}).then((function(e){console.log(e.data),c(e.data.pedidos)}))},z=a.slice().map((function(e,t){return Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{children:e.id+" - "+e.user__name+" - "+e.cliente__nome+" - "+e.qtd_total+" - "+e.valor_total+" - "+e.liberado_cliente+" - "+e.liberado_rep+" - "+e.enviado_fabrica}),e.liberado_rep?Object(N.jsx)(N.Fragment,{}):Object(N.jsx)(p.Button,{label:"Alterar",onClick:function(){return t=e.id,n=e.cliente__id,o=e.cliente__nome,void Object(T.confirmDialog)({message:"Itens nao salvos no carrinho serao apagados. Confirma alteracao?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return A(t,n,o)}});var t,n,o}}),e.liberado_rep?Object(N.jsx)(N.Fragment,{}):e.liberado_cliente&&f?Object(N.jsx)(p.Button,{label:"Processar",onClick:function(){return t=e.id,y(!0),void m()({method:"GET",url:g+"/pedidos/processa/"+t,headers:{Authorization:"Token "+_}}).then((function(e){y(!1),e.data.confirmed?(console.log(e.data),q()):I.current.show([{severity:"error",summary:e.data.message,sticky:!0}])}));var t}}):Object(N.jsx)(N.Fragment,{})]})}));return Object(N.jsxs)("div",{children:[Object(N.jsx)(B.Messages,{ref:I}),Object(N.jsx)(E.Dialog,{title:"Processando",visible:C,onHide:function(){return""},children:Object(N.jsx)(P.ProgressSpinner,{})}),z]})}function z(e){var t=Object(o.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],r=w("carrinhoId",null),i=Object(u.a)(r,2),s=i[0],d=(i[1],w("token",null)),l=Object(u.a)(d,2),j=l[0];l[1];Object(o.useEffect)((function(){b(),document.title="Greenish B2B | Promocoes"}),[]);var b=function(){m()({method:"GET",headers:{Authorization:"Token "+j},url:"https://greencomapi.azurewebsites.net/promocoes"}).then((function(e){c(e.data.promocoes),console.log(e.data.promocoes)}))},O=a.slice(),h=[],f=function(){var e=v,t=O[e].condicoes.map((function(t,n){return Object(N.jsx)("div",{children:Object(N.jsx)(p.Button,{label:t.condicao,onClick:function(){return function(e,t){var n=g+"/promocoes/"+s;m()({method:"GET",url:n,headers:{Authorization:"Token "+j},params:{id_promocao:e,id_condicao:t}}).then((function(e){console.log(e.data.message)}))}(O[e].id_promocao,t.id)}})})}));h.push(Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{children:O[e].descricao}),t]}))};for(var v in O)f();h.push(Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{children:"Remover"}),Object(N.jsx)(p.Button,{label:"Remover",onClick:function(){return function(){var e=g+"/promocoes/remove/"+s;m()({method:"GET",headers:{Authorization:"Token "+j},url:e}).then((function(e){console.log(e.data.message)}))}()}})]}));var x=h.map((function(e){return e}));return Object(N.jsx)("div",{children:x})}n(30);function R(e){var t=Object(o.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],r=Object(o.useState)(""),i=Object(u.a)(r,2),s=i[0],d=i[1],l=Object(o.useState)(""),j=Object(u.a)(l,2),b=j[0],O=j[1],h=w("token",null),f=Object(u.a)(h,2),v=f[0],x=(f[1],Object(o.useState)(!1)),_=Object(u.a)(x,2),k=_[0],S=_[1],C=Object(o.useRef)(null);Object(o.useEffect)((function(){document.title="Greenish B2B | Conta"}),[]);return Object(N.jsxs)("div",{children:[Object(N.jsxs)(E.Dialog,{title:"Alterar Senha",visible:k,onHide:function(){return S(!1)},children:[Object(N.jsx)(B.Messages,{ref:C}),Object(N.jsx)("h5",{children:"Senha Atual"}),Object(N.jsx)(y.Password,{value:a,onChange:function(e){return c(e.target.value)},feedback:!1}),Object(N.jsx)("h5",{children:"Senha Nova"}),Object(N.jsx)(y.Password,{value:s,onChange:function(e){return d(e.target.value)},feedback:!1}),Object(N.jsx)("h5",{children:"Confirme a Nova Senha"}),Object(N.jsx)(y.Password,{value:b,onChange:function(e){return O(e.target.value)},feedback:!1}),Object(N.jsx)("h5",{}),Object(N.jsx)(p.Button,{label:"Confirmar",onClick:function(){return function(){if(s===b){var e={senhaNova:s,senhaAtual:a},t={headers:{Authorization:"Token "+v}};m.a.post(g+"/change_password/",e,t).then((function(e){e.data.confirmed?(localStorage.clear(),window.location.href="/login"):C.current.show([{severity:"error",summary:e.data.message,sticky:!1}])}))}else C.current.show([{severity:"error",summary:"Confirmacao de nova senha invalida",sticky:!1}]);c(""),d(""),O("")}()}})]}),Object(N.jsx)(p.Button,{label:"Alterar Senha",onClick:function(){return S(!0)}}),Object(N.jsx)(p.Button,{label:"Logout",onClick:function(){return function(){var e={headers:{Authorization:"Token "+v}};m.a.get(g+"/accounts/logout",e).then((function(e){localStorage.clear(),window.location.href="/"}))}()}})]})}var G=n(28),D=n(26),F=n(18);function L(e){var t=Object(o.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],r=Object(N.jsxs)("div",{children:[Object(N.jsx)("h3",{children:e.produto.produto__descricao}),Object(N.jsx)("p",{children:e.produto.produto__produto+" - "+e.produto.produto__linha+" - R$"+e.produto.preco})]});return Object(N.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(N.jsxs)(D.Card,{header:r,children:[Object(N.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"}),Object(N.jsx)("div",{className:"p-grid",children:Object(N.jsxs)("div",{className:"p-field p-col-12 p-md-3",children:[Object(N.jsx)(p.Button,{label:"Detalhes",icon:"pi pi-external-link",onClick:function(){c(!0)}}),Object(N.jsx)(E.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:a,style:{width:"75vw"},onHide:function(){c(!1)},children:Object(N.jsxs)("div",{className:"p-grid",children:[Object(N.jsx)("div",{className:"p-col",children:Object(N.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(N.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(N.jsx)(M,{produto:e.produto})})]})})]})})]})})}function M(e){var t=Object(o.useState)(e.produto),n=Object(u.a)(t,1)[0],a=Object(o.useState)(""),c=Object(u.a)(a,2),r=c[0],i=c[1],s=Object(o.useState)({}),d=Object(u.a)(s,2),l=d[0],j=d[1],b=Object(o.useState)(Object(N.jsx)("div",{})),O=Object(u.a)(b,2),h=O[0],f=O[1],v=w("token",null),x=Object(u.a)(v,2),k=x[0],S=(x[1],w("clienteId",null)),C=Object(u.a)(S,1)[0],y=w("carrinhoId",null),I=Object(u.a)(y,2),T=I[0],A=I[1],P=Object(o.useRef)(null),E=_(n.produto__produto,r).dadosPeriodo;Object(o.useEffect)((function(){var e={};for(var t in E){var o=E[t].cor,a=new Array(n.produto__qtd_tamanhos).fill(0);e[o]=a}j(e)}),[E]),Object(o.useEffect)((function(){if(""!==r){var e=E.map((function(e){return Object(N.jsx)(J,{dados:e,pedido:l,setPedido:j})}));f(e)}}),[l]);return Object(N.jsxs)("div",{children:[Object(N.jsx)(B.Messages,{ref:P}),Object(N.jsx)(F.Dropdown,{id:"dropdown",value:r,options:JSON.parse(e.produto.produto__periodos),onChange:function(e){return i(e.value)}}),Object(N.jsxs)("div",{className:"p-grid",children:[Object(N.jsx)("div",{className:"p-col",children:"TIPO"}),Object(N.jsx)("div",{className:"p-col",children:"COR"}),function(e){return JSON.parse(e.produto.produto__tamanhos).map((function(e){return Object(N.jsx)("div",{className:"p-col-1",children:e})}))}(e)]}),h,Object(N.jsx)(p.Button,{label:"Adicionar",onClick:function(){var e=0;for(var t in l){e+=l[t].reduce((function(e,t){return e+t}),0)}var o={produto:n,periodo:r,qtds:l,qtd_total:e,clienteId:C,carrinhoId:T},a={headers:{Authorization:"Token "+k}};console.log(o),console.log(a.headers),m.a.post(g+"/carrinho/",o,a).then((function(e){e.data.confirmed?(P.current.show([{severity:"success",summary:e.data.message,sticky:!0}]),A(e.data.carrinhoId)):P.current.show([{severity:"error",summary:e.data.message,sticky:!0}])})).catch((function(e){console.log(e.message)}))}})]})}function J(e){var t=function(e,t,n){var o=t.pedido;o[t.dados.cor][n]=e,t.setPedido(o)};return Object(N.jsxs)("div",{className:"p-grid",children:[Object(N.jsx)("div",{className:"p-col",children:e.dados.desc_liberacao}),Object(N.jsx)("div",{className:"p-col",children:e.dados.cor+" - "+e.dados.desc_cor}),function(e){var n=[];if(0===Object.keys(e.pedido).length)return n.map((function(e){return e}));var o=function(){var o=a;e.dados.liberacao?n.push(Object(N.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(N.jsx)(G.InputNumber,{min:0,id:e.dados.cor+o,value:e.pedido[e.dados.cor][o],onValueChange:function(n){return t(n.value,e,o)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})})):(console.log(e.dados.qtds),n.push(Object(N.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(N.jsxs)("span",{className:"p-float-label",children:[Object(N.jsx)(G.InputNumber,{max:e.dados.qtds[o],min:0,id:e.dados.cor+o,value:e.pedido[e.dados.cor][o],onValueChange:function(n){return t(n.value,e,o)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"}),Object(N.jsx)("label",{htmlFor:e.dados.cor+o,children:e.dados.qtds[o]})]})})))};for(var a in e.dados.qtds)o();return n.map((function(e){return e}))}(e)]})}var U=n(35);function H(){var e=Object(o.useState)(Object(N.jsx)("div",{})),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(0),r=Object(u.a)(c,2),i=r[0],s=r[1],d=Object(o.useState)(12),l=Object(u.a)(d,2),j=l[0],b=l[1],O=Object(o.useState)(0),h=Object(u.a)(O,2),v=h[0],_=h[1],k=w("token",null),S=Object(u.a)(k,2),C=(S[0],S[1],w("colecao","Todas")),y=Object(u.a)(C,2),B=y[0],I=y[1],T=w("periodo",null),A=Object(u.a)(T,2),P=A[0],q=A[1],z=w("clienteId",null),R=Object(u.a)(z,1)[0],G=w("tamColuna",2),D=Object(u.a)(G,2),M=D[0],J=D[1],H=Object(o.useState)("p-col-12 p-md-6 p-lg-"+M),V=Object(u.a)(H,2),$=V[0],Q=V[1],K=Object(o.useState)(!1),W=Object(u.a)(K,2),X=W[0],Y=W[1],Z=w("colecoes",[]),ee=Object(u.a)(Z,1)[0],te=w("periodos",[]),ne=Object(u.a)(te,1)[0];Object(o.useEffect)((function(){document.title="Greenish B2B | Produtos"}),[]);var oe=function(e,t,n){var a=Object(o.useState)({}),c=Object(u.a)(a,2),r=c[0],i=c[1],s=Object(f.g)(),d=w("token",null),l=Object(u.a)(d,2),j=l[0];return l[1],Object(o.useEffect)((function(){var o=x.a.parse(window.location.search),a=g+s.pathname+"/",c=e;"Todas"===c&&(c=null),m()({method:"GET",url:a,headers:{Authorization:"Token "+j},params:{query:o.query,colecao:c,periodo:t,clienteId:n}}).then((function(e){i(e.data)}))}),[s,e,t,n]),{produtos:r}}(B,P,R).produtos;return Object(o.useEffect)((function(){if("lista"in oe){_(oe.lista.length);var e,t=oe.lista.slice(i,i+j);e=t.map((function(e,t){return Object(N.jsx)("div",{className:$,children:Object(N.jsx)(L,{produto:e},t)})})),a(e),window.scrollTo(0,0)}}),[oe,$,i,j]),Object(o.useEffect)((function(){Q("p-col-12 p-md-6 p-lg-"+M)}),[M]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{children:[Object(N.jsx)(p.Button,{label:"Filtrar",onClick:function(){Y(!0)},className:"p-mr-2"}),Object(N.jsx)(E.Dialog,{header:"Filtros",visible:X,style:{width:"75vw"},onHide:function(){Y(!1)},children:Object(N.jsxs)("div",{className:"p-grid",children:[Object(N.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(N.jsx)("h3",{children:"Colecao"}),Object(N.jsx)(F.Dropdown,{id:"dropdown",value:B,options:ee,onChange:function(e){return I(e.value)}})]}),Object(N.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(N.jsx)("h3",{children:"Periodo"}),Object(N.jsx)(F.Dropdown,{id:"dropdown",value:P,options:ne,onChange:function(e){return q(e.value)}})]}),Object(N.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(N.jsx)("h3",{children:"Coluna"}),Object(N.jsx)(F.Dropdown,{id:"dropdown",value:M,options:[2,3,4],onChange:function(e){return J(e.value)}})]})]})})]}),Object(N.jsx)("div",{className:"p-grid",children:n}),Object(N.jsx)(U.Paginator,{first:i,rows:j,totalRecords:v,rowsPerPageOptions:[12,24,36],onPageChange:function(e){s(e.first),b(e.rows)}})]})}function V(e){var t=Object(o.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],r=w("token",null),i=Object(u.a)(r,2),s=i[0],d=(i[1],function(){c(!1)}),l=function(){m()({method:"GET",url:g+"/carrinho/delete_item/"+e.produto.id,headers:{Authorization:"Token "+s}}).then((function(t){e.forceUpdate()}))},j=e.produto.preco-e.produto.desconto,b=e.produto.preco,O=Object(N.jsxs)("div",{children:[Object(N.jsx)("h3",{children:e.produto.produto__descricao}),Object(N.jsx)("p",{children:e.produto.produto__produto+" - "+e.produto.qtd_item+" - R$"+e.produto.valor_item}),e.produto.desconto>0?Object(N.jsx)("p",{children:"Pre\xe7o: De R$"+b+" por R$"+j}):Object(N.jsx)("p",{children:"Pre\xe7o: R$"+e.produto.preco})]});return Object(N.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(N.jsxs)(D.Card,{header:O,children:[Object(N.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"}),Object(N.jsxs)("div",{className:"p-grid",children:[Object(N.jsx)(p.Button,{label:"Alterar",onClick:function(){c(!0)},className:"p-mr-2"}),Object(N.jsx)(p.Button,{label:"Remover",onClick:function(){Object(T.confirmDialog)({message:"Confirma a exclusao do produto?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return l()}})}}),Object(N.jsx)("div",{className:"p-field p-col-12 p-md-3",children:Object(N.jsx)(E.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:a,style:{width:"75vw"},onHide:function(){return d()},children:Object(N.jsxs)("div",{className:"p-grid",children:[Object(N.jsx)("div",{className:"p-col",children:Object(N.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(N.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(N.jsx)($,{periodoAtual:e.periodoAtual,produto:e.produto,forceUpdate:e.forceUpdate,hideModal:d})})]})})})]})]})})}function $(e){var t=Object(o.useState)(e.produto),n=Object(u.a)(t,1)[0],a=Object(o.useState)(""),c=Object(u.a)(a,2),r=c[0],i=c[1],s=Object(o.useState)({}),d=Object(u.a)(s,2),l=d[0],j=d[1],b=Object(o.useState)(function(e,t){var n=(e=JSON.parse(e)).indexOf(t);n>-1&&e.splice(n,1);(n=e.indexOf("Pre-selecionados"))>-1&&e.splice(n,1);return e}(n.produto__periodos,e.periodoAtual)),O=Object(u.a)(b,1)[0],h=Object(o.useState)(!1),f=Object(u.a)(h,2),v=f[0],x=f[1],k=Object(o.useRef)(null),S=Object(o.useState)(Object(N.jsx)("div",{})),C=Object(u.a)(S,2),y=C[0],I=C[1],T=w("clienteId",null),A=Object(u.a)(T,1)[0],P=w("carrinhoId",null),E=Object(u.a)(P,1)[0],q=w("token",null),z=Object(u.a)(q,2),R=z[0],G=(z[1],_(n.produto__produto,r).dadosPeriodo);Object(o.useEffect)((function(){var e=L(G,n);j(e),v?k.current.show([{severity:"error",summary:"Periodo selecionado nao tem disponivel todas as quantidades digitadas - Verifique as quantidades digitadas",sticky:!0}]):k.current.clear()}),[G,v]),Object(o.useEffect)((function(){if(""!==r){var e=G.map((function(e){return Object(N.jsx)(Q,{dados:e,pedido:l,setPedido:j})}));I(e)}}),[l]);var D=function(e,t){var n=[],o=!1;for(var a in e){t[a]-e[a]<0?(n.push(t[a]),o=!0):n.push(e[a])}return[n,o]},L=function(e,t){var n={},o=JSON.parse(t.qtds),a=!1;for(var c in e){var r=e[c],i=r.cor,s=new Array(t.produto__qtd_tamanhos).fill(0);if(i in o)if(r.liberacao)s=o[i];else{var d=D(o[i],r.qtds),l=Object(u.a)(d,2);s=l[0],l[1]&&(a=!0)}n[i]=s}return x(a),n};return Object(N.jsxs)("div",{children:[Object(N.jsx)(B.Messages,{ref:k}),Object(N.jsx)(F.Dropdown,{id:"dropdown",value:r,options:O,onChange:function(e){return i(e.value)}}),Object(N.jsxs)("div",{className:"p-grid",children:[Object(N.jsx)("div",{className:"p-col",children:"TIPO"}),Object(N.jsx)("div",{className:"p-col",children:"COR"}),JSON.parse(n.produto__tamanhos).map((function(e){return Object(N.jsx)("div",{className:"p-col-1",children:e})}))]}),y,Object(N.jsx)(p.Button,{label:"Alterar",onClick:function(){var t=0;for(var o in l){t+=l[o].reduce((function(e,t){return e+t}),0)}var a={produto:n,periodo:r,qtds:l,qtd_total:t,clienteId:A,carrinhoId:E},c={headers:{Authorization:"Token "+R}};m.a.post(g+"/carrinho/update/"+n.id,a,c).then((function(t){t.data.confirmed?(k.current.show([{severity:"success",summary:t.data.message,sticky:!0}]),e.forceUpdate(),e.hideModal()):k.current.show([{severity:"error",summary:t.data.message,sticky:!0}])})).catch((function(e){console.log(e.message)}))}})]})}function Q(e){var t=function(e,t,n){var o=t.pedido;o[t.dados.cor][n]=e,t.setPedido(o)};return Object(N.jsxs)("div",{className:"p-grid",children:[Object(N.jsx)("div",{className:"p-col",children:e.dados.desc_liberacao}),Object(N.jsx)("div",{className:"p-col",children:e.dados.cor+" - "+e.dados.desc_cor}),function(e){var n=[];if(0===Object.keys(e.pedido).length)return n.map((function(e){return e}));var o=function(){var o=a;e.dados.liberacao?n.push(Object(N.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(N.jsx)(G.InputNumber,{min:0,id:e.dados.cor+o,value:e.pedido[e.dados.cor][o],onValueChange:function(n){return t(n.value,e,o)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})})):n.push(Object(N.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(N.jsxs)("span",{className:"p-float-label",children:[Object(N.jsx)(G.InputNumber,{max:e.dados.qtds[o],min:0,id:e.dados.cor+o,value:e.pedido[e.dados.cor][o],onValueChange:function(n){return t(n.value,e,o)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"}),Object(N.jsx)("label",{htmlFor:e.dados.cor+o,children:e.dados.qtds[o]})]})}))};for(var a in e.dados.qtds)o();return n.map((function(e){return e}))}(e)]})}var K=n(71);function W(){var e=Object(o.useState)(Object(N.jsx)("div",{})),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(0),r=Object(u.a)(c,2),i=r[0],s=r[1],d=w("clienteId",null),l=Object(u.a)(d,2),j=l[0],b=l[1],O=w("clienteNome",null),h=Object(u.a)(O,2),f=h[0],v=h[1],x=w("carrinhoId",null),_=Object(u.a)(x,2),k=_[0],S=_[1],C=w("token",null),y=Object(u.a)(C,2),B=y[0],I=(y[1],w("isRep",null)),T=Object(u.a)(I,2),A=T[0],P=(T[1],Object(o.useState)(!1)),q=Object(u.a)(P,2),z=q[0],R=q[1],G=function(e,t){var n=Object(o.useState)([]),a=Object(u.a)(n,2),c=a[0],r=a[1],i=Object(o.useState)(0),s=Object(u.a)(i,2),d=s[0],l=s[1],j=Object(o.useState)(0),b=Object(u.a)(j,2),p=b[0],O=b[1],h=Object(o.useState)(""),f=Object(u.a)(h,2),v=f[0],x=f[1],g=Object(o.useState)(null),_=Object(u.a)(g,2),N=_[0],k=_[1],S=w("carrinhoId",null),C=Object(u.a)(S,2),y=C[0],B=C[1],I=w("token",null),T=Object(u.a)(I,2),A=T[0];return T[1],Object(o.useEffect)((function(){var e={carrinhoId:y,clienteId:t};m()({method:"GET",headers:{Authorization:"Token "+A},url:"https://greencomapi.azurewebsites.net/carrinho",params:e}).then((function(e){e.data.confirmed&&B(e.data.carrinhoId),r(e.data.dados),x(e.data.observacoes),k(e.data.message),l(e.data.valor_total),O(e.data.qtd_total)}))}),[e,y,v,d,p]),{carrinho:c,emptyMessage:N,observacoes:v,valorTotal:d,qtdTotal:p}}(i,j),D=G.carrinho,F=G.emptyMessage,L=G.observacoes,M=G.valorTotal,J=G.qtdTotal,U=Object(o.useState)(""),H=Object(u.a)(U,2),V=H[0],$=H[1],Q=function(){s((function(e){return e+1}))};Object(o.useEffect)((function(){document.title="Greenish B2B | Carrinho"}),[]),Object(o.useEffect)((function(){$(L)}),[L]),Object(o.useEffect)((function(){var e=D,t=Object(N.jsx)("div",{className:"p-col-12 p-md-6 p-lg-3"});e.length>0&&(t=e.map((function(e,t){return Object(N.jsx)("div",{className:"p-col-12 p-md-12 p-lg-12",children:Object(N.jsx)(X,{forceUpdate:Q,periodoAtual:e.periodo,qtd_periodo:e.qtd_periodo,valor_periodo:e.valor_periodo,itens:e.itens},t)})}))),a(t)}),[D,F,k,i]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("p",{children:F}),Object(N.jsx)("p",{children:"Cliente: "+f+" | Valor Total: "+M+" | Quantidade Total: "+J}),Object(N.jsx)(p.Button,{label:"Salvar",onClick:function(){return R(!0)},className:"p-mr-2"}),Object(N.jsxs)(E.Dialog,{header:"Observacoes",visible:z,onHide:function(){return R(!1)},children:[Object(N.jsx)("div",{children:Object(N.jsx)(K.InputTextarea,{rows:10,cols:50,value:V,onChange:function(e){return $(e.target.value)}})}),Object(N.jsx)(p.Button,{label:"Salvar",onClick:function(){m()({method:"GET",url:g+"/pedidos/salva/"+k+"/",headers:{Authorization:"Token "+B},params:{observacoes:V}}).then((function(e){e.data.confirmed?(A?(b(null),v(null),S(null)):S(null),window.location.href="/pedidos"):console.log(e.data)}))},className:"p-mr-2"})]}),Object(N.jsx)("div",{className:"p-grid",children:n})]})}function X(e){var t,n=e.itens.slice();return t=n.map((function(t,n){return Object(N.jsx)("div",{className:"p-col-6 p-md-6 p-lg-2",children:Object(N.jsx)(V,{periodoAtual:e.periodoAtual,forceUpdate:e.forceUpdate,produto:t},n)})})),Object(N.jsx)(D.Card,{title:e.periodoAtual+" - "+e.qtd_periodo+" - "+e.valor_periodo,children:Object(N.jsx)("div",{className:"p-grid",children:t})})}function Y(){var e=Object(o.useState)(0),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(10),r=Object(u.a)(c,2),i=r[0],s=r[1];return Object(N.jsx)(U.Paginator,{first:n,rows:i,totalRecords:120,rowsPerPageOptions:[10,20,30],onPageChange:function(e){a(e.first),s(e.rows)}})}var Z=n(44),ee=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).state={},o}return Object(s.a)(n,[{key:"verificaLogin",value:function(){var e=JSON.parse(localStorage.getItem("loggedin"));return null==e&&(e=!1),e}},{key:"render",value:function(){var e=this.verificaLogin();return Object(N.jsx)("div",{children:Object(N.jsx)("div",{children:Object(N.jsx)(Z.a,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)("nav",{children:Object(N.jsx)(S,{loggedIn:e})}),Object(N.jsxs)(f.d,{children:[Object(N.jsx)(f.b,{path:"/login",component:I}),Object(N.jsx)(f.b,{path:"/clientes",component:A}),Object(N.jsx)(f.b,{path:"/pedidos",component:q}),Object(N.jsx)(f.b,{path:"/promocoes",component:z}),Object(N.jsx)(f.b,{path:"/conta",component:R}),Object(N.jsx)(f.b,{path:"/carrinho",component:W}),Object(N.jsx)(f.b,{path:"/busca",component:H}),Object(N.jsx)(f.b,{path:"/teste",component:Y}),Object(N.jsx)(f.b,{path:"/:linha/:categoria/:subcategoria",children:e?Object(N.jsx)(H,{}):Object(N.jsx)(f.a,{to:"/login"})}),Object(N.jsx)(f.b,{path:"/:linha/:categoria",children:e?Object(N.jsx)(H,{}):Object(N.jsx)(f.a,{to:"/login"})}),Object(N.jsx)(f.b,{path:"/",component:C})]})]})})})})}}]),n}(a.a.Component),te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,150)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),c(e),r(e)}))};n(146),n(147),n(148);r.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(ee,{})}),document.getElementById("root")),te()},76:function(e,t,n){}},[[149,1,2]]]);
//# sourceMappingURL=main.a02153b9.chunk.js.map