(this["webpackJsonpgreencom-front"]=this["webpackJsonpgreencom-front"]||[]).push([[0],{144:function(e,t,o){},185:function(e,t,o){},194:function(e,t,o){},198:function(e,t,o){"use strict";o.r(t);var c=o(1),a=o.n(c),n=o(30),r=o.n(n),s=(o(91),o(2)),i=(o(92),o(75)),d=o(76),l=o(4),u=o(77),j=o(39),b=o(5),p=o.n(b),O=o(11),m=o(47),h=o.n(m),f="https://greencomapi.azurewebsites.net";function x(e,t){var o=Object(c.useState)((function(){return function(e,t){var o=!1;try{o=JSON.parse(localStorage.getItem(e))}catch(c){o=!1}return o||t}(e,t)})),a=Object(s.a)(o,2),n=a[0],r=a[1];return Object(c.useEffect)((function(){localStorage.setItem(e,JSON.stringify(n))}),[n]),[n,r]}function v(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=Object(c.useState)([]),n=Object(s.a)(a,2),r=n[0],i=n[1],d=x("token",null),l=Object(s.a)(d,2);l[0],l[1];return Object(c.useEffect)((function(){if(""!==t){var o={produto:e,periodo:t};p()({method:"GET",url:"https://greencomapi.azurewebsites.net/periodos/",params:o}).then((function(e){i(e.data.dados)}))}}),[e,t,o]),{dadosPeriodo:r}}var g=o(79),_=o(0),N=function(){var e=Object(c.useRef)(null),t=x("username",null),o=Object(s.a)(t,1)[0],a=x("isRep",null),n=[{label:"Conta",icon:"pi pi-user",url:"/conta"},{label:"Pedidos",icon:"pi pi-book",url:"/pedidos"}];Object(s.a)(a,1)[0]&&(n.push({label:"Clientes",icon:"pi pi-users",url:"/clientes"}),n.push({label:"Promocoes",icon:"pi pi-percentage",url:"/promocoes"}),n.push({label:"Trade",icon:"pi pi-flag",url:"/trade"}));var r=[{label:o,items:n}];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(d.Menu,{model:r,popup:!0,ref:e,id:"popup_menu"}),Object(_.jsx)(l.Button,{icon:"pi pi-align-justify",onClick:function(t){return e.current.toggle(t)},"aria-controls":"popup_menu","aria-haspopup":!0})]})};function C(e){var t=x("categorias",[]),o=Object(s.a)(t,1)[0],a=x("categoriasMobile",[]),n=Object(s.a)(a,1)[0],r=Object(c.useState)(!1),d=Object(s.a)(r,2),b=d[0],p=d[1],O=Object(c.useState)(""),m=Object(s.a)(O,2),h=m[0],f=m[1],v=Object(c.useState)("search"),C=Object(s.a)(v,2),S=(C[0],C[1],x("tipoConta",[])),w=Object(s.a)(S,1)[0],y=Object(_.jsx)("a",{href:"/",children:Object(_.jsx)("img",{alt:"logo",src:"https://www.greenish.com.br/arquivos/logo-greenish.png?v=638040487547770000",className:"p-mr-2"})}),B=Object(_.jsx)("div",{className:"btnMenu",onClick:function(){return p(!0)},children:Object(_.jsx)(l.Button,{className:"bars",icon:"pi pi-bars"})}),k=Object(_.jsx)("a",{href:"/login",style:{textDecoration:"none"},children:Object(_.jsx)(l.Button,{children:"Login"})});return e.loggedIn&&(k=Object(_.jsxs)("div",{className:"endMenu",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)(j.InputText,{ref:e.searchInput,onChange:function(e){f(e.target.value),e.target.value.length>=13&&/^\d+$/.test(e.target.value)&&(e.preventDefault(),window.location="/busca?query="+e.target.value,f(""))},placeholder:"Buscar",type:"text"}),Object(_.jsx)(l.Button,{onClick:function(e){!function(e){""!==h&&(e.preventDefault(),window.location="/busca?query="+h,f(""))}(e)},icon:"pi pi-search",className:"p-button-rounded p-button-secondary"})]}),Object(_.jsxs)("div",{className:"btns",children:[Object(_.jsx)(l.Button,{icon:"pi pi-shopping-cart",onClick:function(e){return window.location.href="/carrinho"},"aria-controls":"popup_menu","aria-haspopup":!0}),"visitante"===w?Object(_.jsx)(l.Button,{icon:"pi pi-user",onClick:function(e){return window.location.href="/conta"},"aria-controls":"popup_menu","aria-haspopup":!0}):Object(_.jsx)(N,{})]})]})),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"card menu",children:Object(_.jsx)(i.Menubar,{model:o,start:y,end:k,className:"menu"})}),Object(_.jsx)("div",{className:"card menuMobile",children:Object(_.jsxs)("header",{className:"menuMobile",children:[y," ",B]})}),Object(_.jsxs)(g.Sidebar,{visible:b,position:"right",onHide:function(){return p(!1)},children:[Object(_.jsx)("p",{children:k}),Object(_.jsx)(u.SlideMenu,{model:n})]})]})}var S=o(80),w=o(81),y=o(86),B=o(85),k=(o(144),o(32)),T=function(e){return Object(_.jsx)("div",{className:"product-item",children:Object(_.jsx)("div",{className:"product-item-content",children:Object(_.jsx)("div",{className:"mb-3",children:Object(_.jsx)("a",{href:e.link,children:Object(_.jsx)("img",{src:e.url_imagem,className:"product-image"})})})})})},I=function(e){Object(y.a)(o,e);var t=Object(B.a)(o);function o(e){var c;return Object(S.a)(this,o),(c=t.call(this,e)).state={banners:[]},c}return Object(w.a)(o,[{key:"componentDidMount",value:function(){this.updateBanners(),document.title="Greenish B2B"}},{key:"updateBanners",value:function(){var e=this;p()({method:"GET",url:"https://greencomapi.azurewebsites.net/home"}).then((function(t){e.setState({banners:t.data.banners}),console.log(e.state.banners)}))}},{key:"render",value:function(){return Object(_.jsx)("div",{children:Object(_.jsx)(k.Carousel,{value:this.state.banners,numVisible:1,numScroll:1,itemTemplate:T})})}}]),o}(a.a.Component),P=o(35),E=o(40),q=o.n(E),z=o(12);function A(e){var t=Object(c.useState)(""),o=Object(s.a)(t,2),a=o[0],n=o[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),d=i[0],u=i[1],b=x("token",null),O=Object(s.a)(b,2),m=(O[0],O[1]),h=x("loggedin",null),v=Object(s.a)(h,2)[1],g=x("clienteId",null),N=Object(s.a)(g,2)[1],C=x("clienteNome",null),S=Object(s.a)(C,2)[1],w=x("isRep",null),y=Object(s.a)(w,2),B=(y[0],y[1]),k=x("username",null),T=Object(s.a)(k,2)[1],I=x("carrinhoId",null),E=Object(s.a)(I,2)[1],A=x("categorias",[]),D=Object(s.a)(A,2)[1],G=x("categoriasMobile",[]),M=Object(s.a)(G,2)[1],R=x("colecoes",[]),F=Object(s.a)(R,2)[1],L=x("periodos",[]),V=Object(s.a)(L,2)[1],J=x("tipoConta",[]),H=Object(s.a)(J,2)[1],Q=x("colecao","Todas"),U=Object(s.a)(Q,2),Y=(U[0],U[1],x("periodo","Todos")),X=Object(s.a)(Y,2),$=(X[0],X[1]),K=x("orderBy","produto"),W=Object(s.a)(K,2),Z=(W[0],W[1]),ee=Object(c.useRef)(null);Object(c.useEffect)((function(){document.title="Greenish B2B | Login"}),[]);return Object(_.jsxs)("div",{children:[Object(_.jsx)(z.Messages,{ref:ee}),Object(_.jsxs)("div",{className:"p-field",children:[Object(_.jsx)("label",{htmlFor:"login",children:"Login"}),Object(_.jsx)(j.InputText,{id:"login",value:a,onChange:function(e){return n(e.target.value)}})]}),Object(_.jsxs)("div",{className:"p-field",children:[Object(_.jsx)("label",{htmlFor:"senha",children:"Senha"}),Object(_.jsx)(P.Password,{id:"senha",value:d,onChange:function(e){return u(e.target.value)},feedback:!1})]}),Object(_.jsx)(l.Button,{label:"Entrar",onClick:function(){return function(){var e=new FormData;e.append("username",a),e.append("password",d),p.a.post(f+"/api-token-auth/",e).then((function(e){var t={headers:{Authorization:"Token "+e.data.token}};console.log(t),m(e.data.token),p.a.get(f+"/login/",t).then((function(e){console.log(e.data),v(!0),N(e.data.clienteId),S(e.data.clienteNome),B(e.data.isRep),T(e.data.username),E(null),D(e.data.cats),M(e.data.cats_mobile),F(e.data.colecoes),V(e.data.periodos),H(e.data.tipo_conta),window.location.href="/",q.a.event({action:"login",user_type:e.data.tipo_conta}),e.data.isRep||($("Imediato"),Z("estoque"))}))})).catch((function(e){ee.current.show([{severity:"error",summary:"Usuario ou senha Incorretos",sticky:!1}]),n(""),u("")}))}()}})]})}var D=o(31),G=o(25),M=o(7),R=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),o=t[0],n=t[1],r=x("token",null),i=Object(s.a)(r,2),d=i[0],u=(i[1],x("clienteId",null)),j=Object(s.a)(u,2)[1],b=x("clienteNome",null),O=Object(s.a)(b,2)[1],m=x("carrinhoId",null),h=Object(s.a)(m,2),f=(h[0],h[1]);Object(c.useEffect)((function(){p()({method:"GET",headers:{Authorization:"Token "+d},url:"https://greencomapi.azurewebsites.net/clientes/"}).then((function(e){console.log(e.data.clientes),n(e.data.clientes)})),document.title="Greenish B2B | Clientes"}),[]);var v=function(e,t){j(e),O(t),f(null),window.location.href="/"};return Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"card",children:Object(_.jsxs)(G.DataTable,{value:o,children:[Object(_.jsx)(M.Column,{field:"cnpj",header:"CNPJ",filter:!0,filterPlaceholder:"Buscar"}),Object(_.jsx)(M.Column,{field:"razao_social",header:"Razao Social",filter:!0,filterPlaceholder:"Buscar"}),Object(_.jsx)(M.Column,{field:"uf",header:"UF"}),Object(_.jsx)(M.Column,{field:"cidade",header:"Cidade",filter:!0,filterPlaceholder:"Buscar"}),Object(_.jsx)(M.Column,{field:"tabela_precos",header:"Tabela"}),Object(_.jsx)(M.Column,{field:"desc_cond_pag",header:"Condicao Pagamento"}),Object(_.jsx)(M.Column,{body:function(e){return Object(_.jsx)(a.a.Fragment,{children:Object(_.jsx)(l.Button,{label:"Selecionar",onClick:function(){return function(e){Object(D.confirmDialog)({message:"Itens nao salvos no carrinho serao apagados. Confirma alteracao?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return v(e.id,e.nome)}})}(e)}})})}})]})})})},F=o(82),L=o(9);o(176),o(178);function V(e){return null==e?"":e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}var J=o(83),H=o.n(J),Q=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),o=t[0],a=t[1],n=x("token",null),r=Object(s.a)(n,2),i=r[0],d=(r[1],x("clienteId",null)),u=Object(s.a)(d,2)[1],j=x("clienteNome",null),b=Object(s.a)(j,2)[1],O=x("carrinhoId",null),m=Object(s.a)(O,2),h=m[0],v=m[1],g=Object(c.useState)(!1),N=Object(s.a)(g,2),C=N[0],S=N[1],w=Object(c.useRef)(null),y=x("isRep",null),B=Object(s.a)(y,1)[0],k=function(){p()({method:"GET",url:"https://greencomapi.azurewebsites.net/pedidos/",headers:{Authorization:"Token "+i}}).then((function(e){a(e.data.pedidos)}))};Object(c.useEffect)((function(){k(),document.title="Greenish B2B | Pedidos"}),[]);var T=function(e,t,o){p()({method:"GET",url:f+"/pedidos/retoma/"+e+"/",headers:{Authorization:"Token "+i},params:{carrinhoAtualId:h}}).then((function(c){c.data.confirmed?(v(e),u(t),b(o),window.location.href="/carrinho"):w.current.show([{severity:"error",summary:c.data.message,sticky:!1}])}))};console.log(o);var I=function(e){return e.toLocaleString("en-US",{style:"currency",currency:"BRL"})};return Object(_.jsxs)("div",{children:[Object(_.jsx)(z.Messages,{ref:w}),Object(_.jsx)(L.Dialog,{title:"Processando",visible:C,onHide:function(){return""},children:Object(_.jsx)(F.ProgressSpinner,{})}),Object(_.jsx)("div",{children:Object(_.jsxs)(G.DataTable,{value:o,children:[Object(_.jsx)(M.Column,{field:"cliente__razao_social",header:"Razao Social",filter:!0,filterPlaceholder:"Buscar"}),Object(_.jsx)(M.Column,{field:"colecao",header:"Colecao",filter:!0,filterPlaceholder:"Buscar"}),Object(_.jsx)(M.Column,{header:"Valor",body:function(e){return"".concat(I(e.valor_total))}}),Object(_.jsx)(M.Column,{header:"Valor Entregar",body:function(e){return"".concat(I(e.valor_total_entregar))}}),Object(_.jsx)(M.Column,{field:"qtd_total",header:"Qtd"}),Object(_.jsx)(M.Column,{field:"cliente__desc_cond_pag",header:"Cond Pag"}),Object(_.jsx)(M.Column,{body:function(e){return null==e.data_liberacao?"...":H()(e.data_liberacao,"YYYY-MM-DDTHH:mm:ssZ").format("DD/MM/YYYY")},header:"Data"}),Object(_.jsx)(M.Column,{field:"liberado_rep",header:"Liberado",body:function(e){return e.liberado_rep?Object(_.jsx)(_.Fragment,{children:"Sim"}):Object(_.jsx)(_.Fragment,{children:"N\xe3o"})}}),Object(_.jsx)(M.Column,{field:"enviado_fabrica",header:"Enviado",body:function(e){return e.enviado_fabrica?Object(_.jsx)(_.Fragment,{children:"Sim"}):Object(_.jsx)(_.Fragment,{children:"N\xe3o"})}}),Object(_.jsx)(M.Column,{field:"codigo_erp",header:"ID Ondas"}),Object(_.jsx)(M.Column,{header:"Acoes",body:function(e){return Object(_.jsxs)("div",{className:"td",children:[e.liberado_rep?Object(_.jsx)(l.Button,{className:"bt",label:"Visualizar",onClick:function(){return window.location.href="/pedido/"+e.id}}):Object(_.jsx)(l.Button,{className:"bt",label:"Alterar",onClick:function(){return function(e){Object(D.confirmDialog)({message:"Itens nao salvos no carrinho serao apagados. Confirma alteracao?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return T(e.id,e.cliente__id,e.cliente__nome)}})}(e)}}),e.liberado_rep?Object(_.jsx)(_.Fragment,{}):e.liberado_cliente&&B?Object(_.jsx)(l.Button,{className:"bt",label:"Processar",onClick:function(){return function(e){S(!0),p()({method:"GET",url:f+"/pedidos/processa/"+e.id+"/",headers:{Authorization:"Token "+i}}).then((function(e){S(!1),e.data.confirmed?k():w.current.show([{severity:"error",summary:e.data.message,sticky:!0}])}))}(e)}}):Object(_.jsx)(_.Fragment,{})]})}})]})})]})},U=function(){var e=x("token",null),t=Object(s.a)(e,2),o=t[0],n=(t[1],x("carrinhoId",null)),r=Object(s.a)(n,2),i=r[0],d=(r[1],Object(c.useRef)(null)),u=Object(c.useState)([]),j=Object(s.a)(u,2),b=j[0],O=j[1],m=x("clienteId",null),h=Object(s.a)(m,1)[0];Object(c.useEffect)((function(){v(),document.title="Greenish B2B | Promocoes"}),[]);var v=function(){var e=f+"/promocoes";null!=h&&(e=e+"/"+h);var t={};null!=i&&(t.carrinhoId=i),p()({method:"GET",headers:{Authorization:"Token "+o},url:e,params:t}).then((function(e){O(e.data.promocoes),console.log(e.data.promocoes)}))};return Object(_.jsxs)("div",{children:[Object(_.jsx)(z.Messages,{ref:d}),Object(_.jsx)("div",{className:"card",children:Object(_.jsxs)(G.DataTable,{value:b,resizableColumns:!0,columnResizeMode:"fit",children:[Object(_.jsx)(M.Column,{field:"descricao",header:"Promocao",style:{width:"15%"}}),Object(_.jsx)(M.Column,{field:"atingido",header:"Atingido",style:{width:"10%"}}),Object(_.jsx)(M.Column,{header:"Acoes",body:function(e){var t=e.condicoes.slice().map((function(t,c){return Object(_.jsx)(l.Button,{className:"p-mr-2",label:t.desc_condicao,onClick:function(){return function(e,t){var c=f+"/promocoes/"+i+"/";p()({method:"GET",url:c,headers:{Authorization:"Token "+o},params:{id_promocao:e,id_condicao:t}}).then((function(e){console.log(e),e.data.confirmed?d.current.show([{severity:"success",summary:e.data.message,sticky:!1}]):d.current.show([{severity:"error",summary:e.data.message,sticky:!1}])}))}(e.id_promocao,t.id)}})}));return Object(_.jsx)(a.a.Fragment,{children:t})},style:{width:"85%"}})]})}),Object(_.jsx)(l.Button,{className:"p-d-block p-mx-auto p-mt-6",label:"Remover Promo\xe7\xf5es",onClick:function(){return function(){var e=f+"/promocoes/remove/"+i+"/";p()({method:"GET",headers:{Authorization:"Token "+o},url:e}).then((function(e){d.current.show([{severity:"success",summary:"Promo\xe7\xf5es Removidas com sucesso",sticky:!1}])}))}()}})]})};o(24);function Y(e){var t=Object(c.useState)(""),o=Object(s.a)(t,2),a=o[0],n=o[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),d=i[0],u=i[1],j=Object(c.useState)(""),b=Object(s.a)(j,2),O=b[0],m=b[1],h=x("token",null),v=Object(s.a)(h,2),g=v[0],N=(v[1],Object(c.useState)(!1)),C=Object(s.a)(N,2),S=C[0],w=C[1],y=Object(c.useRef)(null),B=x("tipoConta",null),k=Object(s.a)(B,1)[0];Object(c.useEffect)((function(){document.title="Greenish B2B | Conta"}),[]);return Object(_.jsxs)("div",{children:[Object(_.jsxs)(L.Dialog,{title:"Alterar Senha",visible:S,onHide:function(){return w(!1)},children:[Object(_.jsx)(z.Messages,{ref:y}),Object(_.jsx)("h5",{children:"Senha Atual"}),Object(_.jsx)(P.Password,{value:a,onChange:function(e){return n(e.target.value)},feedback:!1}),Object(_.jsx)("h5",{children:"Senha Nova"}),Object(_.jsx)(P.Password,{value:d,onChange:function(e){return u(e.target.value)},feedback:!1}),Object(_.jsx)("h5",{children:"Confirme a Nova Senha"}),Object(_.jsx)(P.Password,{value:O,onChange:function(e){return m(e.target.value)},feedback:!1}),Object(_.jsx)("h5",{}),Object(_.jsx)(l.Button,{label:"Confirmar",onClick:function(){return function(){if(d===O){var e={senhaNova:d,senhaAtual:a},t={headers:{Authorization:"Token "+g}};p.a.post(f+"/change_password/",e,t).then((function(e){e.data.confirmed?(localStorage.clear(),window.location.href="/login"):y.current.show([{severity:"error",summary:e.data.message,sticky:!1}])}))}else y.current.show([{severity:"error",summary:"Confirmacao de nova senha invalida",sticky:!1}]);n(""),u(""),m("")}()}})]}),"visitante"===k?Object(_.jsx)(_.Fragment,{}):Object(_.jsx)(l.Button,{label:"Alterar Senha",onClick:function(){return w(!0)}}),Object(_.jsx)(l.Button,{label:"Logout",onClick:function(){return function(){var e={headers:{Authorization:"Token "+g}};p.a.get(f+"/accounts/logout/",e).then((function(e){localStorage.clear(),window.location.href="/"}))}()}})]})}var X=o(23),$=o(20),K=o(15),W=o(21),Z=o(17);o(72);function ee(e){var t=0,o=Object(c.useState)(!1),a=Object(s.a)(o,2),n=a[0],r=a[1];Object(c.useEffect)((function(){r(e.isBarCode)}),[e.isBarCode]);var i,d,l=function(){r(!1)};return d=e.produto.produto__desconto>0?Object(_.jsxs)("div",{style:{display:"flex",gap:8},children:[Object(_.jsx)("s",{children:V(e.produto.preco)}),Object(_.jsx)("span",{children:V(e.produto.preco-e.produto.produto__desconto*e.produto.preco)})]}):"",Object(_.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(_.jsxs)($.Card,{className:"card",children:[Object(_.jsxs)("div",{className:"img",children:[e.produto.produto__desconto>0&&Object(_.jsx)("div",{className:"tag",children:Object(_.jsx)("p",{children:parseFloat(100*e.produto.produto__desconto).toFixed()+"%"})}),Object(_.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem",onClick:function(){r(!0)}})]}),Object(_.jsxs)("div",{className:"header",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("p",{id:"p1",children:e.produto.produto__descricao}),Object(_.jsx)("p",{children:e.produto.produto__produto})]}),Object(_.jsx)("div",{className:"chip",children:e.produto.produto__desconto>0?Object(_.jsx)("p",{id:"desconto",children:d}):Object(_.jsx)("p",{children:V(e.produto.preco)})})]}),Object(_.jsxs)("div",{className:"cardIn",children:[Object(_.jsx)(L.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:n,style:{width:"75vw"},onHide:function(){return l()},children:Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsx)("div",{className:"p-col",children:Object(_.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(_.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(_.jsx)(te,{isBarcode:e.isBarCode,searchInput:e.searchInput,onSave:l,produto:e.produto,periodo:e.periodo})})]})}),void 0!=e.produto.dados_periodo?Object(_.jsx)("div",{style:{width:"100%"},children:e.produto.dados_periodo.map((function(o,c){var a=JSON.parse(e.produto.produto__tamanhos);if(i=e.produto.dados_periodo.map((function(e){return e.qtds.reduce((function(e,t){return e+t}))})),t<=0&&i.reduce((function(e,t){return e+t}))>0)return t++,Object(_.jsxs)("div",{className:"disponivel",children:[Object(_.jsx)("div",{children:Object(_.jsx)("strong",{children:"Dispon\xedvel"})}),Object(_.jsx)("div",{className:"table",children:a.map((function(t,o){return Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{children:t}),Object(_.jsx)("p",{children:e.produto.dados_periodo.reduce((function(e,t){return e+t.qtds[o]}),0)})]})}))})]},c)}))}):null]})]})})}function te(e){var t=Object(c.useState)(e.produto),o=Object(s.a)(t,1)[0],a=Object(c.useState)(e.periodo),n=Object(s.a)(a,2),r=n[0],i=n[1],d=Object(c.useState)({}),u=Object(s.a)(d,2),j=u[0],b=u[1],O=Object(c.useState)(0),m=Object(s.a)(O,2),h=m[0],g=m[1],N=Object(c.useState)({change:0,anterior:0,novo:0}),C=Object(s.a)(N,2),S=C[0],w=C[1],y=Object(c.useState)(Object(_.jsx)("div",{})),B=Object(s.a)(y,2),k=B[0],T=B[1],I=x("token",null),P=Object(s.a)(I,2),E=P[0],q=(P[1],x("clienteId",null)),A=Object(s.a)(q,1)[0],D=x("carrinhoId",null),G=Object(s.a)(D,2),M=G[0],R=G[1],F=Object(c.useState)(!1),V=Object(s.a)(F,2),J=V[0],H=V[1],Q=Object(c.useState)(""),U=Object(s.a)(Q,2),Y=U[0],X=U[1],$=Object(c.useRef)(null),Z=v(o.produto__produto,r).dadosPeriodo;Object(c.useEffect)((function(){var e={};for(var t in Z){var c=Z[t].cor,a=new Array(o.produto__qtd_tamanhos).fill(0);e[c]=a}b(e),g(0)}),[Z]),Object(c.useEffect)((function(){g(h+S.change)}),[S]),Object(c.useEffect)((function(){if(""!==r){var t=Z.map((function(t){return Object(_.jsx)(oe,{dados:t,pedido:j,produto:e.produto,setPedido:b,setChangePedidoTotal:w})}));T(t)}}),[j,r]);return Object(_.jsxs)("div",{children:[Object(_.jsx)(z.Messages,{ref:$}),Object(_.jsxs)("div",{className:"header",children:[Object(_.jsx)(K.Dropdown,{placeholder:"Selecione Per\xedodo",id:"dropdown",value:r,options:JSON.parse(e.produto.produto__periodos),onChange:function(e){return i(e.value)}}),Object(_.jsxs)("div",{className:"chip",children:[Object(_.jsx)("span",{id:"qtd",children:"Quantidade Total:"}),Object(_.jsx)("p",{id:"quantidade",children:h})]})]}),k,Object(_.jsx)(l.Button,{style:{marginTop:"1.5rem"},label:"Observa\xe7\xe3o",onClick:function(){return H(!0)},className:"p-mr-2"}),Object(_.jsx)(l.Button,{style:{marginTop:"1.5rem"},label:"Adicionar",onClick:function(){var t=0;for(var c in j){t+=j[c].reduce((function(e,t){return e+t}),0)}var a={produto:o,periodo:r,qtds:j,qtd_total:t,clienteId:A,carrinhoId:M,observacao_item:Y},n={headers:{Authorization:"Token "+E}};console.log(a),console.log(n.headers),t>0?p.a.post(f+"/carrinho/",a,n).then((function(t){t.data.confirmed?(e.onSave(),R(t.data.carrinhoId)):$.current.show([{severity:"error",summary:t.data.message,sticky:!0}])})).catch((function(e){console.log(e.message)})):$.current.show([{severity:"error",summary:"Quantidade deve ser maior que 0",sticky:!1}]),e.searchInput.current.focus()}}),Object(_.jsx)(L.Dialog,{header:"Observa\xe7\xe3o Item",visible:J,onHide:function(){return H(!1)},children:Object(_.jsx)("div",{children:Object(_.jsx)(W.InputTextarea,{rows:2,cols:50,value:Y,onChange:function(e){return X(e.target.value)}})})})]})}function oe(e){var t=function(e,t,o){null==e&&(e=0),t.setChangePedidoTotal(0);var c=t.pedido,a=c[t.dados.cor][o];c[t.dados.cor][o]=e,t.setPedido(c),console.log("change"),console.log(e-a),t.setChangePedidoTotal({change:e-a,anterior:a,novo:e})};return Object(_.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"1rem"},children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{children:Object(_.jsx)("b",{children:e.dados.cor+" - "+e.dados.desc_cor})}),Object(_.jsx)("div",{children:Object(_.jsx)("p",{style:{fontSize:12,marginBottom:"-.1rem"},children:e.dados.desc_liberacao})})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{style:{display:"flex",gap:".25rem"},children:function(e){return JSON.parse(e.produto.produto__tamanhos).map((function(e){return Object(_.jsx)("div",{className:"p-col-1",style:{fontSize:12,marginBottom:"-.75rem",marginLeft:".25rem"},children:e})}))}(e)}),Object(_.jsx)("div",{style:{display:"flex",gap:".25rem"},children:function(e){var o=[];if(0===Object.keys(e.pedido).length)return o.map((function(e){return e}));var c=function(){var c=a;e.dados.liberacao?o.push(Object(_.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(_.jsx)(X.InputNumber,{min:0,id:e.dados.cor+c,value:e.pedido[e.dados.cor][c],onValueChange:function(o){return t(o.value,e,c)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})})):o.push(Object(_.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(_.jsxs)("span",{className:"p-float-label",children:[Object(_.jsx)(X.InputNumber,{max:e.dados.qtds[c],min:0,id:e.dados.cor+c,value:e.pedido[e.dados.cor][c],onValueChange:function(o){return t(o.value,e,c)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"}),Object(_.jsx)("label",{htmlFor:e.dados.cor+c,children:e.dados.qtds[c]})]})}))};for(var a in e.dados.qtds)c();return o.map((function(e){return e}))}(e)})]})]})}var ce=o(41);o(73);function ae(e){var t=Object(c.useState)(Object(_.jsx)("div",{})),o=Object(s.a)(t,2),a=o[0],n=o[1],r=Object(c.useState)(0),i=Object(s.a)(r,2),d=i[0],l=i[1],u=Object(c.useState)(12),j=Object(s.a)(u,2),b=j[0],m=j[1],v=Object(c.useState)(0),g=Object(s.a)(v,2),N=g[0],C=g[1],S=x("token",null),w=Object(s.a)(S,2),y=(w[0],w[1],x("colecao","Todas")),B=Object(s.a)(y,2),k=B[0],T=B[1],I=x("periodo","Todos"),P=Object(s.a)(I,2),E=P[0],q=P[1],z=x("orderBy","produto"),A=Object(s.a)(z,2),D=A[0],G=A[1],M=x("clienteId",null),R=Object(s.a)(M,1)[0],F=x("tamColuna",3),L=Object(s.a)(F,2),V=L[0],J=L[1],H=Object(c.useState)("p-col-12 p-md-6 p-lg-"+V),Q=Object(s.a)(H,2),U=Q[0],Y=Q[1],X=Object(c.useState)(!1),$=Object(s.a)(X,2),W=($[0],$[1],x("colecoes",[])),Z=Object(s.a)(W,1)[0],te=x("periodos",[]),oe=Object(s.a)(te,1)[0];Object(c.useEffect)((function(){document.title="Greenish B2B | Produtos"}),[]);var ae=function(e,t,o,a){var n=Object(c.useState)({}),r=Object(s.a)(n,2),i=r[0],d=r[1],l=Object(c.useState)(!1),u=Object(s.a)(l,2),j=u[0],b=u[1],m=Object(O.g)(),v=x("token",null),g=Object(s.a)(v,2),_=g[0];return g[1],Object(c.useEffect)((function(){var c=h.a.parse(window.location.search),n=f+m.pathname+"/",r=e;"Todas"===r&&(r=null);var s=t;"Todos"===s&&(s=null),p()({method:"GET",url:n,headers:{Authorization:"Token "+_},params:{query:c.query,colecao:r,periodo:s,order_by:a,clienteId:o}}).then((function(e){d(e.data),console.log(e.data.isBarCode),b(e.data.isBarCode)}))}),[m,e,t,o,a]),{produtos:i,isBarCode:j}}(k,E,R,D),ne=ae.produtos,re=ae.isBarCode;console.log(re);return Object(c.useEffect)((function(){if("lista"in ne){C(ne.lista.length);var t,o=ne.lista.slice(d,d+b);t=o.map((function(t,o){return Object(_.jsx)("div",{className:U,children:Object(_.jsx)(ee,{produto:t,isBarCode:re,periodo:E,searchInput:e.searchInput},o)})})),n(t),window.scrollTo(0,0)}}),[ne,U,d,b,re]),Object(c.useEffect)((function(){Y("p-col-12 p-md-"+V+" p-lg-"+V)}),[V]),Object(_.jsxs)("div",{className:"main",children:[Object(_.jsxs)("div",{className:"Filtros",children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("h3",{children:"Colecao"}),Object(_.jsx)(K.Dropdown,{id:"dropdown",value:k,options:Z,onChange:function(e){return T(e.value)}})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("h3",{children:"Periodo"}),Object(_.jsx)(K.Dropdown,{id:"dropdown",value:E,options:oe,onChange:function(e){return q(e.value)}})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("h3",{children:"Ordenar por"}),Object(_.jsx)(K.Dropdown,{id:"dropdown",value:D,options:["produto","estoque","desconto"],onChange:function(e){return G(e.value)}})]}),Object(_.jsxs)("div",{className:"last",children:[Object(_.jsx)("h3",{children:"Tamanho"}),Object(_.jsx)(K.Dropdown,{id:"dropdown",value:V,options:[2,3,4,6,12],onChange:function(e){return J(e.value)}})]})]}),Object(_.jsx)("div",{className:"p-grid",children:a}),Object(_.jsx)(ce.Paginator,{first:d,rows:b,totalRecords:N,rowsPerPageOptions:[12,24,36],onPageChange:function(e){l(e.first),m(e.rows)}})]})}function ne(e){var t=0,o=Object(c.useState)(!1),a=Object(s.a)(o,2),n=a[0],r=a[1];Object(c.useEffect)((function(){r(e.isBarCode)}),[e.isBarCode]);var i,d=function(){r(!1)};return e.produto.produto__desconto>0?Object(_.jsxs)("div",{style:{display:"flex",gap:8},children:[Object(_.jsx)("s",{children:V(e.produto.preco)}),Object(_.jsx)("span",{children:V(e.produto.preco-e.produto.produto__desconto*e.produto.preco)})]}):"",Object(_.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(_.jsxs)($.Card,{className:"card",children:[Object(_.jsxs)("div",{className:"img",children:[e.produto.produto__desconto>0&&Object(_.jsx)("div",{className:"tag",children:Object(_.jsx)("p",{children:parseFloat(100*e.produto.produto__desconto).toFixed()+"%"})}),Object(_.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem",onClick:function(){r(!0)}})]}),Object(_.jsx)("div",{className:"header",children:Object(_.jsxs)("div",{children:[Object(_.jsx)("p",{id:"p1",children:e.produto.produto__descricao}),Object(_.jsx)("p",{children:e.produto.produto__produto})]})}),Object(_.jsxs)("div",{className:"cardIn",children:[Object(_.jsx)(L.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:n,style:{width:"75vw"},onHide:function(){return d()},children:Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsx)("div",{className:"p-col",children:Object(_.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(_.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(_.jsx)(re,{isBarcode:e.isBarCode,searchInput:e.searchInput,onSave:d,produto:e.produto,periodo:e.periodo})})]})}),void 0!=e.produto.dados_periodo?Object(_.jsx)("div",{style:{width:"100%"},children:e.produto.dados_periodo.map((function(o,c){var a=JSON.parse(e.produto.produto__tamanhos);if(i=e.produto.dados_periodo.map((function(e){return e.qtds.reduce((function(e,t){return e+t}))})),t<=0&&i.reduce((function(e,t){return e+t}))>0)return t++,Object(_.jsxs)("div",{className:"disponivel",children:[Object(_.jsx)("div",{children:Object(_.jsx)("strong",{children:"Dispon\xedvel"})}),Object(_.jsx)("div",{className:"table",children:a.map((function(t,o){return Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{children:t}),Object(_.jsx)("p",{children:e.produto.dados_periodo.reduce((function(e,t){return e+t.qtds[o]}),0)})]})}))})]},c)}))}):null]})]})})}function re(e){var t=Object(c.useState)(e.produto),o=Object(s.a)(t,1)[0],a=Object(c.useState)(e.periodo),n=Object(s.a)(a,2),r=n[0],i=n[1],d=Object(c.useState)({}),l=Object(s.a)(d,2),u=l[0],j=l[1],b=Object(c.useState)(0),p=Object(s.a)(b,2),O=p[0],m=p[1],h=Object(c.useState)({change:0,anterior:0,novo:0}),f=Object(s.a)(h,2),g=f[0],N=f[1],C=Object(c.useState)(Object(_.jsx)("div",{})),S=Object(s.a)(C,2),w=S[0],y=S[1],B=x("token",null),k=Object(s.a)(B,2),T=(k[0],k[1],x("clienteId",null)),I=(Object(s.a)(T,1)[0],x("carrinhoId",null)),P=Object(s.a)(I,2),E=(P[0],P[1],Object(c.useState)(!1)),q=Object(s.a)(E,2),A=q[0],D=q[1],G=Object(c.useState)(""),M=Object(s.a)(G,2),R=M[0],F=M[1],V=Object(c.useRef)(null),J=v(o.produto__produto,r).dadosPeriodo;Object(c.useEffect)((function(){var e={};for(var t in J){var c=J[t].cor,a=new Array(o.produto__qtd_tamanhos).fill(0);e[c]=a}j(e),m(0)}),[J]),Object(c.useEffect)((function(){m(O+g.change)}),[g]),Object(c.useEffect)((function(){if(""!==r){var t=J.map((function(t){return Object(_.jsx)(se,{dados:t,pedido:u,produto:e.produto,setPedido:j,setChangePedidoTotal:N})}));y(t)}}),[u,r]);return Object(_.jsxs)("div",{children:[Object(_.jsx)(z.Messages,{ref:V}),Object(_.jsxs)("div",{className:"header",children:[Object(_.jsx)(K.Dropdown,{placeholder:"Selecione Per\xedodo",id:"dropdown",value:r,options:JSON.parse(e.produto.produto__periodos),onChange:function(e){return i(e.value)}}),Object(_.jsxs)("div",{className:"chip",children:[Object(_.jsx)("span",{id:"qtd",children:"Quantidade Total:"}),Object(_.jsx)("p",{id:"quantidade",children:O})]})]}),w,Object(_.jsx)(L.Dialog,{header:"Observa\xe7\xe3o Item",visible:A,onHide:function(){return D(!1)},children:Object(_.jsx)("div",{children:Object(_.jsx)(W.InputTextarea,{rows:2,cols:50,value:R,onChange:function(e){return F(e.target.value)}})})})]})}function se(e){var t=function(e,t,o){null==e&&(e=0),t.setChangePedidoTotal(0);var c=t.pedido,a=c[t.dados.cor][o];c[t.dados.cor][o]=e,t.setPedido(c),console.log("change"),console.log(e-a),t.setChangePedidoTotal({change:e-a,anterior:a,novo:e})};return Object(_.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"1rem"},children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{children:Object(_.jsx)("b",{children:e.dados.cor+" - "+e.dados.desc_cor})}),Object(_.jsx)("div",{children:Object(_.jsx)("p",{style:{fontSize:12,marginBottom:"-.1rem"},children:e.dados.desc_liberacao})})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{style:{display:"flex",gap:".25rem"},children:function(e){return JSON.parse(e.produto.produto__tamanhos).map((function(e){return Object(_.jsx)("div",{className:"p-col-1",style:{fontSize:12,marginBottom:"-.75rem",marginLeft:".25rem"},children:e})}))}(e)}),Object(_.jsx)("div",{style:{display:"flex",gap:".25rem"},children:function(e){var o=[];if(0===Object.keys(e.pedido).length)return o.map((function(e){return e}));var c=function(){var c=a;e.dados.liberacao?o.push(Object(_.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(_.jsx)(X.InputNumber,{min:0,id:e.dados.cor+c,value:e.pedido[e.dados.cor][c],onValueChange:function(o){return t(o.value,e,c)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})})):o.push(Object(_.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(_.jsxs)("span",{className:"p-float-label",children:[Object(_.jsx)(X.InputNumber,{max:e.dados.qtds[c],min:0,id:e.dados.cor+c,value:e.pedido[e.dados.cor][c],onValueChange:function(o){return t(o.value,e,c)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"}),Object(_.jsx)("label",{htmlFor:e.dados.cor+c,children:e.dados.qtds[c]})]})}))};for(var a in e.dados.qtds)c();return o.map((function(e){return e}))}(e)})]})]})}function ie(e){var t=Object(c.useState)(Object(_.jsx)("div",{})),o=Object(s.a)(t,2),a=o[0],n=o[1],r=Object(c.useState)(0),i=Object(s.a)(r,2),d=i[0],l=i[1],u=Object(c.useState)(12),j=Object(s.a)(u,2),b=j[0],m=j[1],v=Object(c.useState)(0),g=Object(s.a)(v,2),N=g[0],C=g[1],S=Object(c.useState)("Imediato"),w=Object(s.a)(S,2),y=(w[0],w[1],x("tamColuna",3)),B=Object(s.a)(y,2),k=B[0],T=(B[1],Object(c.useState)("p-col-12 p-md-6 p-lg-"+k)),I=Object(s.a)(T,2),P=I[0],E=I[1],q=Object(c.useState)(!1),z=Object(s.a)(q,2);z[0],z[1];Object(c.useEffect)((function(){document.title="Greenish B2B | Produtos"}),[]);var A=function(){var e=Object(c.useState)({}),t=Object(s.a)(e,2),o=t[0],a=t[1],n=Object(c.useState)(!1),r=Object(s.a)(n,2),i=r[0],d=r[1],l=Object(O.g)();return Object(c.useEffect)((function(){var e=h.a.parse(window.location.search),t=f+l.pathname+"/";p()({method:"GET",url:t,params:{query:e.query}}).then((function(e){a(e.data),console.log(e.data.isBarCode),d(e.data.isBarCode)}))}),[l]),{produtos:o,isBarCode:i}}(),D=A.produtos,G=A.isBarCode;console.log(G);return Object(c.useEffect)((function(){if("lista"in D){C(D.lista.length);var t,o=D.lista.slice(d,d+b);t=o.map((function(t,o){return Object(_.jsx)("div",{className:P,children:Object(_.jsx)(ne,{produto:t,isBarCode:G,searchInput:e.searchInput},o)})})),n(t),window.scrollTo(0,0)}}),[D,P,d,b,G]),Object(c.useEffect)((function(){E("p-col-12 p-md-"+k+" p-lg-"+k)}),[k]),Object(_.jsxs)("div",{className:"main",children:[Object(_.jsx)("div",{className:"p-grid",children:a}),Object(_.jsx)(ce.Paginator,{first:d,rows:b,totalRecords:N,rowsPerPageOptions:[12,24,36],onPageChange:function(e){l(e.first),m(e.rows)}})]})}o(74),o(185);var de=o(84);function le(e){var t=Object(c.useState)(!1),o=Object(s.a)(t,2),a=o[0],n=o[1],r=x("token",null),i=Object(s.a)(r,1)[0],d=Object(c.useState)(!0),u=Object(s.a)(d,2),j=u[0],b=u[1],O=Object(c.useRef)(null),m=function(){n(!1)},h=function(){p()({method:"GET",url:f+"/carrinho/delete_item/"+e.produto.id+"/",headers:{Authorization:"Token "+i}}).then((function(t){e.forceUpdate()}))},v=e.produto.preco-e.produto.desconto,g=e.produto.preco,N=Object(_.jsxs)("div",{children:[Object(_.jsx)("h4",{children:e.produto.produto__descricao+" - "+e.produto.produto__produto}),Object(_.jsx)("p",{children:"Qtd: "+e.produto.qtd_item+" | Valor: "+V(e.produto.valor_item)}),e.produto.desconto>0?Object(_.jsx)("div",{className:"chip",children:Object(_.jsx)("p",{children:Object(_.jsxs)("div",{style:{display:"flex",gap:8},children:[Object(_.jsx)("s",{children:V(g)}),Object(_.jsx)("span",{children:V(v)})]})})}):Object(_.jsx)("div",{className:"chip",children:Object(_.jsx)("p",{children:"Pre\xe7o: "+V(e.produto.preco)})})]});JSON.parse(e.produto.qtds);return console.log(e.produto),Object(_.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(_.jsxs)($.Card,{children:[e.produto.desconto>0&&Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:"tag",children:Object(_.jsx)("p",{children:(100*e.produto.desconto/g).toString().substring(0,2)+"%"})})}),Object(_.jsx)(z.Messages,{ref:O}),Object(_.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"}),Object(_.jsx)("h4",{children:N}),Object(_.jsxs)("div",{className:"p-grid btns",children:[Object(_.jsx)(l.Button,{label:"Remover",onClick:function(){Object(D.confirmDialog)({message:"Confirma a exclusao do produto?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return h()}})}}),Object(_.jsxs)(de.Panel,{header:"Alterar",collapsed:j,onToggle:function(e){return b(e.value)},toggleable:!0,children:[Object(_.jsx)("div",{className:"p-field p-col-12 p-md-4 p-mt-1",children:Object(_.jsxs)("span",{className:"p-float-label",children:[Object(_.jsx)(K.Dropdown,{inputId:"dropdown",value:e.periodoAtual,options:JSON.parse(e.produto.periodos_alteracao),onChange:function(t){return function(t){if(console.log(t),""!==t){var o={periodo:t,produto:e.produto},c={headers:{Authorization:"Token "+i}};p.a.post(f+"/carrinho/update_periodo/"+e.produto.id+"/",o,c).then((function(t){t.data.confirmed?(b(!1),e.forceUpdate()):O.current.show([{severity:"error",summary:t.data.message,sticky:!1}])})).catch((function(e){console.log(e.message)}))}}(t.value)}}),Object(_.jsx)("label",{htmlFor:"dropdown",children:"Periodo"})]})}),Object(_.jsx)(l.Button,{label:"Alterar Quantidades",onClick:function(){n(!0)}})]})]}),Object(_.jsx)("div",{className:"p-field p-col-12 p-md-3",children:Object(_.jsx)(L.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:a,style:{width:"75vw"},onHide:function(){return m()},children:Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsx)("div",{className:"p-col",children:Object(_.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(_.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(_.jsx)(ue,{periodoAtual:e.periodoAtual,produto:e.produto,forceUpdate:e.forceUpdate,hideModal:m})})]})})})]})})}function ue(e){var t=Object(c.useState)(e.produto),o=Object(s.a)(t,1)[0],a=Object(c.useState)(e.periodoAtual),n=Object(s.a)(a,1)[0],r=Object(c.useState)({}),i=Object(s.a)(r,2),d=i[0],u=i[1],j=Object(c.useRef)(null),b=Object(c.useState)(Object(_.jsx)("div",{})),O=Object(s.a)(b,2),m=O[0],h=O[1],g=x("clienteId",null),N=Object(s.a)(g,1)[0],C=x("carrinhoId",null),S=Object(s.a)(C,1)[0],w=Object(c.useState)(!1),y=Object(s.a)(w,2),B=y[0],k=y[1],T=Object(c.useState)(e.produto.observacao_item),I=Object(s.a)(T,2),P=I[0],E=I[1],q=x("token",null),A=Object(s.a)(q,1)[0],D=v(o.produto__produto,n).dadosPeriodo;Object(c.useEffect)((function(){var e=function(e,t){var o={},c=JSON.parse(t.qtds),a=!1;for(var n in e){var r=e[n],i=r.cor,d=new Array(t.produto__qtd_tamanhos).fill(0);if(i in c)if(r.liberacao)d=c[i];else{var l=be(c[i],r.qtds),u=Object(s.a)(l,2);d=u[0],u[1]&&(a=!0)}o[i]=d}return[o,a]}(D,o),t=Object(s.a)(e,2),c=t[0];t[1];u(c)}),[D]),Object(c.useEffect)((function(){if(""!==n){var e=D.map((function(e){return Object(_.jsx)(je,{dados:e,pedido:d,setPedido:u})}));h(e)}}),[d]);return Object(_.jsxs)("div",{children:[Object(_.jsx)(z.Messages,{ref:j}),Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsx)("div",{className:"p-col",children:"TIPO"}),Object(_.jsx)("div",{className:"p-col",children:"COR"}),JSON.parse(o.produto__tamanhos).map((function(e){return Object(_.jsx)("div",{className:"p-col-1",children:e})}))]}),m,Object(_.jsx)(l.Button,{label:"Observa\xe7\xe3o",onClick:function(){return k(!0)},className:"p-mr-2"}),Object(_.jsx)(L.Dialog,{header:"Observa\xe7\xe3o Item",visible:B,onHide:function(){return k(!1)},children:Object(_.jsx)("div",{children:Object(_.jsx)(W.InputTextarea,{rows:2,cols:50,value:P,onChange:function(e){return E(e.target.value)}})})}),Object(_.jsx)(l.Button,{label:"Alterar",onClick:function(){var t=0;for(var c in d){t+=d[c].reduce((function(e,t){return e+t}),0)}var a={produto:o,qtds:d,qtd_total:t,clienteId:N,carrinhoId:S,observacao_item:P},n={headers:{Authorization:"Token "+A}};p.a.post(f+"/carrinho/update_qtds/"+o.id+"/",a,n).then((function(t){t.data.confirmed?(j.current.show([{severity:"success",summary:t.data.message,sticky:!0}]),e.forceUpdate(),e.hideModal()):j.current.show([{severity:"error",summary:t.data.message,sticky:!0}])})).catch((function(e){console.log(e.message)}))}})]})}function je(e){var t=function(e,t,o){var c=t.pedido;c[t.dados.cor][o]=e,t.setPedido(c)};return Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsx)("div",{className:"p-col",children:e.dados.desc_liberacao}),Object(_.jsx)("div",{className:"p-col",children:e.dados.cor+" - "+e.dados.desc_cor}),function(e){var o=[];if(0===Object.keys(e.pedido).length)return o.map((function(e){return e}));var c=function(){var c=a;e.dados.liberacao?o.push(Object(_.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(_.jsx)(X.InputNumber,{min:0,id:e.dados.cor+c,value:e.pedido[e.dados.cor][c],onValueChange:function(o){return t(o.value,e,c)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})})):o.push(Object(_.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(_.jsxs)("span",{className:"p-float-label",children:[Object(_.jsx)(X.InputNumber,{max:e.dados.qtds[c],min:0,id:e.dados.cor+c,value:e.pedido[e.dados.cor][c],onValueChange:function(o){return t(o.value,e,c)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"}),Object(_.jsx)("label",{htmlFor:e.dados.cor+c,children:e.dados.qtds[c]})]})}))};for(var a in e.dados.qtds)c();return o.map((function(e){return e}))}(e)]})}function be(e,t){var o=[],c=!1;for(var a in e){t[a]-e[a]<0?(o.push(t[a]),c=!0):o.push(e[a])}return[o,c]}o(187),o(189),o(191);function pe(){var e=Object(c.useState)(Object(_.jsx)("div",{})),t=Object(s.a)(e,2),o=t[0],a=t[1],n=Object(c.useState)(0),r=Object(s.a)(n,2),i=r[0],d=r[1],u=x("clienteId",null),j=Object(s.a)(u,2),b=j[0],O=j[1],m=x("clienteNome",null),h=Object(s.a)(m,2),v=(h[0],h[1]),g=x("carrinhoId",null),N=Object(s.a)(g,2),C=N[0],S=N[1],w=x("token",null),y=Object(s.a)(w,2),B=y[0],k=(y[1],x("isRep",null)),T=Object(s.a)(k,2),I=T[0],P=(T[1],Object(c.useState)(!1)),E=Object(s.a)(P,2),q=E[0],z=E[1],A=Object(c.useState)("Real"),D=Object(s.a)(A,2),G=D[0],M=(D[1],x("tipoConta",null)),R=Object(s.a)(M,1)[0],F=function(e,t){var o=Object(c.useState)([]),a=Object(s.a)(o,2),n=a[0],r=a[1],i=Object(c.useState)(0),d=Object(s.a)(i,2),l=d[0],u=d[1],j=Object(c.useState)(0),b=Object(s.a)(j,2),O=b[0],m=b[1],h=Object(c.useState)(""),f=Object(s.a)(h,2),v=f[0],g=f[1],_=Object(c.useState)(""),N=Object(s.a)(_,2),C=N[0],S=N[1],w=Object(c.useState)(null),y=Object(s.a)(w,2),B=y[0],k=y[1],T=x("carrinhoId",null),I=Object(s.a)(T,2),P=I[0],E=I[1],q=x("token",null),z=Object(s.a)(q,2),A=z[0];return z[1],Object(c.useEffect)((function(){var e={carrinhoId:P,clienteId:t};p()({method:"GET",headers:{Authorization:"Token "+A},url:"https://greencomapi.azurewebsites.net/carrinho/",params:e}).then((function(e){console.log(e.data),e.data.confirmed&&E(e.data.carrinhoId),r(e.data.dados),g(e.data.observacoes),S(e.data.razao_social),k(e.data.message),u(e.data.valor_total),m(e.data.qtd_total)}))}),[e,P,v,l,O,C]),{carrinho:n,emptyMessage:B,observacoes:v,valorTotal:l,qtdTotal:O,razaoSocial:C}}(i,b),J=F.carrinho,H=F.emptyMessage,Q=F.observacoes,U=F.valorTotal,Y=F.qtdTotal,X=F.razaoSocial,$=Object(c.useState)(""),K=Object(s.a)($,2),Z=K[0],ee=K[1],te=function(){d((function(e){return e+1}))};Object(c.useEffect)((function(){document.title="Greenish B2B | Carrinho"}),[]),Object(c.useEffect)((function(){ee(Q)}),[Q]),Object(c.useEffect)((function(){var e=J,t=Object(_.jsx)("div",{className:"p-col-12 p-md-6 p-lg-3"});e.length>0&&(t=e.map((function(e,t){return Object(_.jsx)("div",{className:"p-col-12 p-md-12 p-lg-12",children:Object(_.jsx)(Oe,{forceUpdate:te,periodoAtual:e.periodo,qtd_periodo:e.qtd_periodo,valor_periodo:e.valor_periodo,itens:e.itens},t)})}))),a(t)}),[J,H,C,i]);return Object(_.jsxs)("div",{className:"carrinho",children:[Object(_.jsx)("p",{children:H}),Object(_.jsxs)("div",{className:"chipGroup",children:[Object(_.jsx)("div",{className:"chip",children:Object(_.jsx)("p",{children:"Cliente: "+X})}),Object(_.jsx)("div",{className:"chip",children:Object(_.jsx)("p",{children:"Quantidade Total: "+Y})}),Object(_.jsx)("div",{className:"chip",children:Object(_.jsx)("p",{children:"Valor Total: "+V(U)})})]}),Object(_.jsx)(l.Button,{label:"Salvar",onClick:function(){return z(!0)},className:"p-button-rounded p-mr-2"}),Object(_.jsxs)(L.Dialog,{header:"Observacoes",visible:q,onHide:function(){return z(!1)},children:[Object(_.jsx)("div",{children:Object(_.jsx)(W.InputTextarea,{rows:10,cols:50,value:Z,onChange:function(e){return ee(e.target.value)}})}),Object(_.jsx)("div",{children:Object(_.jsx)(l.Button,{label:"Salvar",className:"p-d-block p-mx-auto p-mt-2",onClick:function(){return function(){if("visitante"===R)p()({method:"GET",url:f+"/pedidos/gera_pdf/"+C+"/",headers:{Authorization:"Token "+B}}).then((function(e){e.data.confirmed?window.open(f+"/"+e.data.file,"popUpWindow"):console.log(e.data)}));else{var e=!1;"Teste"===G&&(e=!0),p()({method:"GET",url:f+"/pedidos/salva/"+C+"/",headers:{Authorization:"Token "+B},params:{observacoes:Z,isTeste:e}}).then((function(e){e.data.confirmed?(I?(O(null),v(null),S(null)):S(null),window.location.href="/pedidos"):console.log(e.data)}))}}()}})})]}),Object(_.jsx)("div",{className:"p-grid",children:o})]})}function Oe(e){var t,o=e.itens.slice();return t=o.map((function(t,o){return Object(_.jsx)("div",{className:"p-col-6 p-md-6 p-lg-2",children:Object(_.jsx)(le,{periodoAtual:e.periodoAtual,forceUpdate:e.forceUpdate,produto:t},o)})})),Object(_.jsxs)($.Card,{children:[Object(_.jsx)("hr",{}),Object(_.jsx)("h2",{children:e.periodoAtual}),Object(_.jsx)("p",{children:"Quantidade Periodo: "+e.qtd_periodo+" | Valor Periodo: "+V(e.valor_periodo)}),Object(_.jsx)("div",{className:"p-grid",children:t})]})}function me(e){var t=Object(c.useState)(!1),o=Object(s.a)(t,2),a=o[0],n=o[1],r=x("token",null),i=(Object(s.a)(r,1)[0],Object(c.useState)(!0)),d=Object(s.a)(i,2),u=(d[0],d[1],Object(c.useRef)(null)),j=function(){n(!1)},b=e.produto.preco-e.produto.desconto,p=e.produto.preco,O=Object(_.jsxs)("div",{children:[Object(_.jsx)("h4",{children:e.produto.produto__descricao+" - "+e.produto.produto__produto}),Object(_.jsx)("p",{children:"Qtd: "+e.produto.qtd_item+" | Valor: "+V(e.produto.valor_item)}),Object(_.jsx)("p",{children:"Qtd Entregar: "+e.produto.qtd_item_entregar}),e.produto.desconto>0?Object(_.jsx)(Z.Chip,{label:"Pre\xe7o: De "+V(p)+" por R$"+V(b)}):Object(_.jsx)(Z.Chip,{label:"Pre\xe7o: "+V(e.produto.preco)})]});return Object(_.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(_.jsxs)($.Card,{header:O,children:[Object(_.jsx)(z.Messages,{ref:u}),Object(_.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"}),Object(_.jsx)("div",{className:"p-grid",children:Object(_.jsx)(l.Button,{label:"Detalhes",onClick:function(){n(!0)},className:"p-mr-2"})}),Object(_.jsx)("div",{className:"p-field p-col-12 p-md-3",children:Object(_.jsx)(L.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:a,style:{width:"75vw"},onHide:function(){return j()},children:Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsx)("div",{className:"p-col",children:Object(_.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(_.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(_.jsx)(he,{periodoAtual:e.periodoAtual,produto:e.produto,hideModal:j})})]})})})]})})}function he(e){var t=Object(c.useState)(e.produto),o=Object(s.a)(t,1)[0],a=Object(c.useState)(e.periodoAtual),n=Object(s.a)(a,1)[0],r=Object(c.useState)({}),i=Object(s.a)(r,2),d=(i[0],i[1],Object(c.useRef)(null)),l=Object(c.useState)(Object(_.jsx)("div",{})),u=Object(s.a)(l,2),j=u[0],b=u[1];Object(c.useEffect)((function(){var e=function(e){var t={},o=JSON.parse(e.qtds);for(var c in t=[],o){var a={};a.cor=c,a.qtds=o[c],t.push(a)}return t}(o),t=JSON.parse(o.qtds);if(""!==n){console.log(t);var c=e.map((function(e){return Object(_.jsx)(fe,{dados:e,pedido:t})}));b(c)}}),[]);return Object(_.jsxs)("div",{children:[Object(_.jsx)(z.Messages,{ref:d}),Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsx)("div",{className:"p-col",children:"COR"}),JSON.parse(o.produto__tamanhos).map((function(e){return Object(_.jsx)("div",{className:"p-col-1",children:e})}))]}),j]})}function fe(e){return Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsx)("div",{className:"p-col",children:e.dados.cor}),function(e){var t=[];if(0===Object.keys(e.pedido).length)return t.map((function(e){return e}));for(var o in e.dados.qtds){var c=o;t.push(Object(_.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(_.jsx)(X.InputNumber,{min:0,id:e.dados.cor+c,disabled:!0,value:e.pedido[e.dados.cor][c],mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})}))}return t.map((function(e){return e}))}(e)]})}function xe(){var e=Object(c.useState)(Object(_.jsx)("div",{})),t=Object(s.a)(e,2),o=t[0],a=t[1],n=x("token",null),r=Object(s.a)(n,2),i=r[0],d=(r[1],Object(c.useState)([])),l=Object(s.a)(d,2),u=l[0],j=l[1],b=Object(c.useState)(null),O=Object(s.a)(b,2),m=O[0],h=O[1],v=Object(c.useState)(null),g=Object(s.a)(v,2),N=g[0],C=g[1],S=Object(c.useState)(null),w=Object(s.a)(S,2),y=w[0],B=w[1],k=Object(c.useState)(null),T=Object(s.a)(k,2),I=T[0],P=T[1],E=Object(c.useState)(null),q=Object(s.a)(E,2),z=q[0],A=q[1],D=Object(c.useState)(null),G=Object(s.a)(D,2),M=G[0],R=G[1];return Object(c.useEffect)((function(){document.title="Greenish B2B | Carrinho";var e=window.location.href,t=e.substring(e.lastIndexOf("/")+1),o=f+"/pedido/"+t;p()({method:"GET",headers:{Authorization:"Token "+i},url:o}).then((function(e){console.log(e.data),e.data.confirmed&&(j(e.data.dados),R(e.data.razao_social),h(e.data.message),C(e.data.valor_total),B(e.data.qtd_total),P(e.data.valor_total_entregar),A(e.data.qtd_total_entregar)),console.log(e.data.dados)}))}),[]),Object(c.useEffect)((function(){var e=u,t=Object(_.jsx)("div",{className:"p-col-12 p-md-6 p-lg-3"});e.length>0&&(t=e.map((function(e,t){return Object(_.jsx)("div",{className:"p-col-12 p-md-12 p-lg-12",children:Object(_.jsx)(ve,{periodoAtual:e.periodo,qtd_periodo:e.qtd_periodo,valor_periodo:e.valor_periodo,qtd_periodo_entregar:e.qtd_periodo_entregar,valor_periodo_entregar:e.valor_periodo_entregar,itens:e.itens},t)})}))),a(t)}),[u,m]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("p",{children:m}),Object(_.jsx)(Z.Chip,{label:"Cliente: "+M}),Object(_.jsx)(Z.Chip,{label:"Quantidade Total: "+y}),Object(_.jsx)(Z.Chip,{label:"Quantidade a Total Entregar: "+z}),Object(_.jsx)(Z.Chip,{label:"Valor Total: "+V(N)}),Object(_.jsx)(Z.Chip,{label:"Valor Total a Entregar: "+V(I)}),Object(_.jsx)("div",{className:"p-grid",children:o})]})}function ve(e){console.log(e);var t,o=e.itens.slice();return t=o.map((function(t,o){return Object(_.jsx)("div",{className:"p-col-6 p-md-6 p-lg-2",children:Object(_.jsx)(me,{periodoAtual:e.periodoAtual,produto:t},o)})})),Object(_.jsxs)($.Card,{title:e.periodoAtual,children:[Object(_.jsx)("p",{children:"Quantidade Periodo: "+e.qtd_periodo+" | Valor Periodo: "+V(e.valor_periodo)}),Object(_.jsx)("p",{children:"Quantidade Periodo a Entregar: "+e.qtd_periodo_entregar+" | Valor Periodo a Entregar: "+V(e.valor_periodo_entregar)}),Object(_.jsx)("div",{className:"p-grid",children:t})]})}o(194);var ge=function(){var e=x("token",null),t=Object(s.a)(e,2),o=t[0],a=(t[1],Object(c.useState)([])),n=Object(s.a)(a,2),r=n[0],i=n[1],d=Object(c.useState)([]),u=Object(s.a)(d,2),j=u[0],b=u[1],O=Object(c.useState)(null),m=Object(s.a)(O,2),h=m[0],v=m[1],g=Object(c.useState)({}),N=Object(s.a)(g,2),C=N[0],S=N[1],w=Object(c.useState)({}),y=Object(s.a)(w,2),B=y[0],T=y[1],I=Object(c.useState)(!1),P=Object(s.a)(I,2),E=P[0],q=P[1],z=Object(c.useState)(!1),A=Object(s.a)(z,2),D=A[0],G=A[1],M=Object(c.useState)(""),R=Object(s.a)(M,2),F=R[0],V=R[1],J=[{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"600px",numVisible:2,numScroll:2},{breakpoint:"480px",numVisible:1,numScroll:1}];Object(c.useEffect)((function(){document.title="Greenish B2B | Trade Marketing";p()({method:"GET",headers:{Authorization:"Token "+o},url:"https://greencomapi.azurewebsites.net/trade/get_materiais"}).then((function(e){console.log(e.data),e.data.confirmed&&(i(e.data.materiais),b(e.data.clientes)),console.log(e.data.clientes)}))}),[]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsxs)("div",{className:"p-col-12",children:[Object(_.jsx)("h4",{children:"Cliente"}),Object(_.jsx)(K.Dropdown,{placeholder:"Selecione Cliente",id:"dropdown",value:h,options:j,onChange:function(e){return v(e.value)},optionLabel:"razao_social"})]}),Object(_.jsxs)("div",{className:"p-col-6",children:[Object(_.jsxs)("h4",{children:["Material: ",C.descricao]}),Object(_.jsxs)("div",{className:"card",children:[Object(_.jsx)("div",{className:"p-grid",children:Object(_.jsx)("div",{className:"p-col-12",children:Object(_.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(B.imagem_material_opcao),style:{height:"200px"},alt:"escolher",className:"product-image"})})}),Object(_.jsx)("div",{className:"p-col-12",children:Object(_.jsx)("p",{children:C.descricao_longa})})]})]}),Object(_.jsx)("div",{className:"p-col-6"}),Object(_.jsx)("div",{className:"p-col-3",children:null==B.descricao_opcao?Object(_.jsx)(l.Button,{label:"Escolher Material",onClick:function(){return G(!0)}}):Object(_.jsx)(l.Button,{label:"Alterar Material",onClick:function(){return G(!0)}})}),Object(_.jsx)("div",{className:"p-col-9"}),Object(_.jsxs)("div",{className:"p-col-12",children:[Object(_.jsx)("h4",{children:"Observacoes"}),Object(_.jsx)(W.InputTextarea,{rows:5,cols:100,value:F,onChange:function(e){return V(e.target.value)}})]})]}),Object(_.jsx)(L.Dialog,{header:"Escolha material",visible:D,style:{width:"75vw"},onHide:function(){return G(!1)},children:Object(_.jsx)("div",{className:"carousel-demo",children:Object(_.jsx)("div",{className:"card",children:Object(_.jsx)(k.Carousel,{value:r,numVisible:2,numScroll:1,responsiveOptions:J,className:"custom-carousel",circular:!0,itemTemplate:function(e){return Object(_.jsx)("div",{className:"product-item",children:Object(_.jsxs)("div",{className:"product-item-content",children:[Object(_.jsx)("div",{className:"mb-3",children:Object(_.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(e.imagem_material),alt:e.descricao,className:"product-image"})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("h4",{className:"mb-1",children:e.descricao}),Object(_.jsx)("h6",{className:"mt-0 mb-3",children:e.descricao_longa}),Object(_.jsx)("div",{className:"car-buttons mt-5",children:Object(_.jsx)(l.Button,{icon:"pi pi-pencil",onClick:function(){return function(e){S(e),q(!0)}(e)},className:"p-button p-button-rounded mr-2"})})]})]})})},header:Object(_.jsx)("h5",{children:"Teste"})})})})}),Object(_.jsx)(L.Dialog,{header:"Escolha opcao de material",visible:E,style:{width:"75vw"},onHide:function(){return q(!1)},children:Object(_.jsx)("div",{className:"carousel-demo",children:Object(_.jsx)("div",{className:"card",children:Object(_.jsx)(k.Carousel,{value:C.opcoes,numVisible:3,numScroll:1,responsiveOptions:J,className:"custom-carousel",circular:!0,itemTemplate:function(e){return Object(_.jsx)("div",{className:"product-item",children:Object(_.jsxs)("div",{className:"product-item-content",children:[Object(_.jsx)("div",{className:"mb-3",children:Object(_.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(e.imagem_material_opcao),alt:e.descricao,className:"product-image"})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("h4",{className:"mb-1",children:e.descricao_opcao}),Object(_.jsx)("h6",{className:"mt-0 mb-3",children:"Prazo de Envio: ".concat(e.prazo_envio," dias")}),Object(_.jsx)("div",{className:"car-buttons mt-5",children:Object(_.jsx)(l.Button,{icon:"pi pi-pencil",className:"p-button p-button-rounded mr-2",onClick:function(){return function(e){T(e),q(!1),G(!1)}(e)}})})]})]})})}})})})}),Object(_.jsx)(l.Button,{label:"Salvar",className:"p-d-block p-mx-auto p-mt-2",onClick:function(){p()({method:"GET",url:f+"/trade/salva_solicitacao",headers:{Authorization:"Token "+o},params:{observacoes:F,clienteId:h.id,materialOpcaoId:B.id}}).then((function(e){e.data.confirmed?window.location.href="/trade/solicitacoes":console.log(e.data)}))}})]})},_e=function(){var e=x("token",null),t=Object(s.a)(e,2),o=t[0],n=(t[1],Object(c.useState)([])),r=Object(s.a)(n,2),i=r[0],d=r[1],u=Object(c.useState)({}),j=Object(s.a)(u,2),b=j[0],O=j[1],m=Object(c.useState)(!1),h=Object(s.a)(m,2),f=h[0],v=h[1];Object(c.useEffect)((function(){p()({method:"GET",headers:{Authorization:"Token "+o},url:"https://greencomapi.azurewebsites.net/trade/get_solicitacoes"}).then((function(e){console.log(e.data.solicitacoes),d(e.data.solicitacoes)})),document.title="Greenish B2B | Trade"}),[]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(L.Dialog,{header:"Detalhes Solicitacao",visible:f,style:{width:"75vw"},onHide:function(){return v(!1)},children:[Object(_.jsxs)("div",{className:"p-grid",children:[Object(_.jsxs)("div",{className:"p-col-6",children:[Object(_.jsxs)("h4",{children:["Material: ",b.material]}),Object(_.jsxs)("div",{className:"card",children:[Object(_.jsx)("div",{className:"p-grid",children:Object(_.jsx)("div",{className:"p-col-12",children:Object(_.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(b.material_opcao_imagem),style:{height:"200px"},alt:"escolher",className:"product-image"})})}),Object(_.jsx)("div",{className:"p-col-12",children:Object(_.jsx)("p",{children:b.material_descricao_longa})})]})]}),Object(_.jsx)("div",{className:"p-col-6"})]}),Object(_.jsx)("h5",{children:"Observacoes"}),Object(_.jsx)(W.InputTextarea,{value:b.observacoes,rows:5,cols:30,disabled:!0}),Object(_.jsx)(k.Carousel,{value:b.imagens,numVisible:3,numScroll:1,circular:!0,itemTemplate:function(e){return Object(_.jsx)("div",{className:"product-item",children:Object(_.jsx)("div",{className:"product-item-content",children:Object(_.jsx)("div",{className:"mb-3",children:Object(_.jsx)("img",{src:"https://ondasstr092020.blob.core.windows.net/greencom/".concat(e.imagem_solicitacao_trade),alt:"Sem Imagem",className:"product-image"})})})})},header:Object(_.jsx)("h5",{children:"Imagens"})})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)(l.Button,{label:"Fazer nova solicitacao",onClick:function(){return window.location.href="/trade/solicitacao"},className:"p-button p-button-rounded mr-2"}),Object(_.jsx)("div",{className:"card",children:Object(_.jsxs)(G.DataTable,{value:i,children:[Object(_.jsx)(M.Column,{field:"cliente__razao_social",header:"Cliente",filter:!0,filterPlaceholder:"Buscar"}),Object(_.jsx)(M.Column,{field:"material",header:"Material"}),Object(_.jsx)(M.Column,{field:"status",header:"Status"}),Object(_.jsx)(M.Column,{field:"data_solicitacao",header:"Data Solicitacao"}),Object(_.jsx)(M.Column,{field:"previsao_envio",header:"Previsao Envio"}),Object(_.jsx)(M.Column,{body:function(e){return Object(_.jsx)(a.a.Fragment,{children:Object(_.jsx)(l.Button,{label:"Visualizar",onClick:function(){return function(e){O(e),v(!0)}(e)}})})}})]})})]})]})},Ne=function(){var e=x("token",null),t=Object(s.a)(e,2),o=t[0],n=(t[1],x("carrinhoId",null)),r=Object(s.a)(n,2),i=r[0],d=(r[1],Object(c.useRef)(null)),u=Object(c.useState)([]),j=Object(s.a)(u,2),b=j[0],O=j[1];Object(c.useEffect)((function(){m(),document.title="Greenish B2B | Promocoes"}),[]);var m=function(){p()({method:"GET",headers:{Authorization:"Token "+o},url:"https://greencomapi.azurewebsites.net/promocoes"}).then((function(e){O(e.data.promocoes),console.log(e.data.promocoes)}))};return Object(_.jsxs)("div",{children:[Object(_.jsx)(z.Messages,{ref:d}),Object(_.jsx)("div",{className:"card",children:Object(_.jsxs)(G.DataTable,{value:b,children:[Object(_.jsx)(M.Column,{field:"descricao",header:"Promocao"}),Object(_.jsx)(M.Column,{header:"Acoes",body:function(e){var t=e.condicoes.slice().map((function(t,c){return Object(_.jsx)(l.Button,{className:"p-mr-2",label:e.tipo_condicao+" - "+t.condicao,onClick:function(){return function(e,t){var c=f+"/promocoes/"+i;p()({method:"GET",url:c,headers:{Authorization:"Token "+o},params:{id_promocao:e,id_condicao:t}}).then((function(e){d.current.show([{severity:"success",summary:"Promo\xe7\xe3o computada com sucesso",sticky:!1}])}))}(e.id_promocao,t.id)}})}));return Object(_.jsx)(a.a.Fragment,{children:t})}})]})}),Object(_.jsx)(l.Button,{className:"p-d-block p-mx-auto p-mt-6",label:"Remover Promo\xe7\xf5es",onClick:function(){return function(){var e=f+"/promocoes/remove/"+i;p()({method:"GET",headers:{Authorization:"Token "+o},url:e}).then((function(e){d.current.show([{severity:"success",summary:"Promo\xe7\xf5es Removidas com sucesso",sticky:!1}])}))}()}})]})},Ce=o(46);var Se=function(){var e=Object(c.useState)(function(){var e=JSON.parse(localStorage.getItem("loggedin"));return null==e&&(e=!1),e}()),t=Object(s.a)(e,2),o=t[0],a=(t[1],Object(c.useRef)(null));return Object(_.jsx)("div",{children:Object(_.jsx)("div",{children:Object(_.jsx)(Ce.a,{children:Object(_.jsxs)("div",{children:[Object(_.jsx)("nav",{children:Object(_.jsx)(C,{searchInput:a,loggedIn:o})}),Object(_.jsxs)(O.d,{children:[Object(_.jsx)(O.b,{path:"/login",component:A}),Object(_.jsx)(O.b,{path:"/clientes",component:R}),Object(_.jsx)(O.b,{path:"/pedidos",component:Q}),Object(_.jsx)(O.b,{path:"/promocoes",component:U}),Object(_.jsx)(O.b,{path:"/conta",component:Y}),Object(_.jsx)(O.b,{path:"/carrinho",component:pe}),Object(_.jsx)(O.b,{path:"/trade/solicitacao",component:ge}),Object(_.jsx)(O.b,{path:"/trade",component:_e}),Object(_.jsx)(O.b,{path:"/busca",children:Object(_.jsx)(ae,{searchInput:a})}),Object(_.jsx)(O.b,{path:"/teste",component:Ne}),Object(_.jsx)(O.b,{path:"/pedido/:idPedido",component:xe}),Object(_.jsx)(O.b,{path:"/online",component:ie}),Object(_.jsx)(O.b,{path:"/:linha/:categoria/:subcategoria",children:o?Object(_.jsx)(ae,{searchInput:a}):Object(_.jsx)(O.a,{to:"/login"})}),Object(_.jsx)(O.b,{path:"/:linha/:categoria",children:o?Object(_.jsx)(ae,{searchInput:a}):Object(_.jsx)(O.a,{to:"/login"})}),Object(_.jsx)(O.b,{path:"/",component:I})]})]})})})})},we=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,200)).then((function(t){var o=t.getCLS,c=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;o(e),c(e),a(e),n(e),r(e)}))};o(195),o(196),o(197);q.a.initialize("G-XGGNKTY87X"),r.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(Se,{})}),document.getElementById("root")),we()},72:function(e,t,o){},73:function(e,t,o){},74:function(e,t,o){},91:function(e,t,o){},92:function(e,t,o){}},[[198,1,2]]]);
//# sourceMappingURL=main.8d7cc3e4.chunk.js.map