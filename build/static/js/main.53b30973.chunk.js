(this["webpackJsonpgreencom-front"]=this["webpackJsonpgreencom-front"]||[]).push([[0],{165:function(e,t,o){"use strict";o.r(t);var n=o(1),c=o.n(n),a=o(21),r=o.n(a),i=(o(81),o(35)),s=o(36),l=o(40),d=o(39),u=o(2),j=o(70),b=o(71),p=o(5),h=o(37),O=o(4),m=o.n(O),f=o(8),v=o(72),x=o.n(v),g="https://greencomapi.azurewebsites.net";function k(e,t){var o=Object(n.useState)((function(){return function(e,t){return JSON.parse(localStorage.getItem(e))||t}(e,t)})),c=Object(u.a)(o,2),a=c[0],r=c[1];return Object(n.useEffect)((function(){localStorage.setItem(e,JSON.stringify(a))}),[a]),[a,r]}function C(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=Object(n.useState)([]),a=Object(u.a)(c,2),r=a[0],i=a[1],s=k("token",null),l=Object(u.a)(s,2),d=l[0];l[1];return Object(n.useEffect)((function(){if(""!==t){var o={produto:e,periodo:t};m()({method:"GET",headers:{Authorization:"Token "+d},url:"https://greencomapi.azurewebsites.net/periodos",params:o}).then((function(e){i(e.data.dados)}))}}),[e,t,o]),{dadosPeriodo:r}}var w=o(0),_=function(){var e=Object(n.useRef)(null),t=k("username",null),o=Object(u.a)(t,1)[0],c=k("isRep",null),a=[{label:"Conta",icon:"pi pi-user",url:"/conta"},{label:"Pedidos",icon:"pi pi-upload",url:"/pedidos"}];Object(u.a)(c,1)[0]&&(a.push({label:"Promocoes",icon:"pi pi-external-link",url:"/promocoes"}),a.push({label:"Clientes",icon:"pi pi-external-link",url:"/clientes"}));var r=[{label:o,items:a}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(b.Menu,{model:r,popup:!0,ref:e,id:"popup_menu"}),Object(w.jsx)(p.Button,{icon:"pi pi-user",onClick:function(t){return e.current.toggle(t)},"aria-controls":"popup_menu","aria-haspopup":!0})]})};function N(e){var t=k("categorias",[]),o=Object(u.a)(t,1)[0],c=Object(n.useState)(""),a=Object(u.a)(c,2),r=a[0],i=a[1],s=Object(w.jsx)("a",{href:"/",children:Object(w.jsx)("img",{alt:"logo",src:"https://ondasstr092020.blob.core.windows.net/modelo/logo.png",height:"40",className:"p-mr-2"})}),l=Object(w.jsx)("a",{href:"/login",children:"Login"});return e.loggedIn&&(l=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(h.InputText,{onChange:function(e){i(e.target.value),e.target.value.length>=13&&/^\d+$/.test(e.target.value)&&(e.preventDefault(),window.location="/busca?query="+e.target.value,i(""))},placeholder:"Buscar",type:"text"}),Object(w.jsx)(p.Button,{onClick:function(e){""!==r&&(e.preventDefault(),window.location="/busca?query="+r,i(""))},icon:"pi pi-search",className:"p-button-rounded p-button-secondary"}),Object(w.jsx)(p.Button,{icon:"pi pi-shopping-cart",onClick:function(e){return window.location.href="/carrinho"},"aria-controls":"popup_menu","aria-haspopup":!0}),Object(w.jsx)(_,{})]})),Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"card",children:Object(w.jsx)(j.Menubar,{model:o,start:s,end:l})})})}var y=function(e){Object(l.a)(o,e);var t=Object(d.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={banners:[]},n}return Object(s.a)(o,[{key:"componentDidMount",value:function(){this.updateBanners(),document.title="Greenish B2B"}},{key:"updateBanners",value:function(){var e=this;m()({method:"GET",url:"https://greencomapi.azurewebsites.net/home"}).then((function(t){e.setState({banners:t.data.banners}),console.log(e.state.banners)}))}},{key:"render",value:function(){var e=this.state.banners.slice().map((function(e,t){return Object(w.jsx)("a",{href:e.url,children:Object(w.jsx)("img",{src:e.img})})}));return Object(w.jsx)("div",{children:e})}}]),o}(c.a.Component),S=o(29),B=(o(64),o(12));function T(e){var t=Object(n.useState)(""),o=Object(u.a)(t,2),c=o[0],a=o[1],r=Object(n.useState)(""),i=Object(u.a)(r,2),s=i[0],l=i[1],d=k("token",null),j=Object(u.a)(d,2),b=(j[0],j[1]),O=k("loggedin",null),f=Object(u.a)(O,2)[1],v=k("clienteId",null),x=Object(u.a)(v,2)[1],C=k("clienteNome",null),_=Object(u.a)(C,2)[1],N=k("isRep",null),y=Object(u.a)(N,2),T=(y[0],y[1]),I=k("username",null),A=Object(u.a)(I,2)[1],P=k("carrinhoId",null),E=Object(u.a)(P,2)[1],z=k("categorias",[]),F=Object(u.a)(z,2)[1],q=k("colecoes",[]),D=Object(u.a)(q,2)[1],G=k("periodos",[]),R=Object(u.a)(G,2)[1],L=Object(n.useRef)(null);Object(n.useEffect)((function(){document.title="Greenish B2B | Login"}),[]);return Object(w.jsxs)("div",{children:[Object(w.jsx)(B.Messages,{ref:L}),Object(w.jsxs)("div",{className:"p-field",children:[Object(w.jsx)("label",{htmlFor:"login",children:"Login"}),Object(w.jsx)(h.InputText,{id:"login",value:c,onChange:function(e){return a(e.target.value)}})]}),Object(w.jsxs)("div",{className:"p-field",children:[Object(w.jsx)("label",{htmlFor:"senha",children:"Senha"}),Object(w.jsx)(S.Password,{id:"senha",value:s,onChange:function(e){return l(e.target.value)},feedback:!1})]}),Object(w.jsx)(p.Button,{label:"Entrar",onClick:function(){return function(){var e=new FormData;e.append("username",c),e.append("password",s),m.a.post(g+"/api-token-auth/",e).then((function(e){var t={headers:{Authorization:"Token "+e.data.token}};b(e.data.token),m.a.get(g+"/login",t).then((function(e){f(!0),x(e.data.clienteId),_(e.data.clienteNome),T(e.data.isRep),A(e.data.username),E(null),F(e.data.cats),D(e.data.colecoes),R(e.data.periodos),window.location.href="/"}))})).catch((function(e){L.current.show([{severity:"error",summary:"Usuario ou senha Incorretos",sticky:!1}]),a(""),l("")}))}()}})]})}var I=o(22),A=o(19),P=o(9),E=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),o=t[0],a=t[1],r=k("token",null),i=Object(u.a)(r,2),s=i[0],l=(i[1],k("clienteId",null)),d=Object(u.a)(l,2)[1],j=k("clienteNome",null),b=Object(u.a)(j,2)[1],h=k("carrinhoId",null),O=Object(u.a)(h,2),f=O[0],v=O[1];Object(n.useEffect)((function(){m()({method:"GET",headers:{Authorization:"Token "+s},url:"https://greencomapi.azurewebsites.net/clientes"}).then((function(e){console.log(e.data.clientes),a(e.data.clientes)})),document.title="Greenish B2B | Clientes"}),[]);var x=function(e,t){m()({method:"GET",headers:{Authorization:"Token "+s},url:g+"/pedidos/deleta/"+f}),d(e),b(t),v(null),window.location.href="/"};return Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)(A.DataTable,{value:o,children:[Object(w.jsx)(P.Column,{field:"nome",header:"Nome",filter:!0,filterPlaceholder:"Busca por Nome"}),Object(w.jsx)(P.Column,{field:"uf",header:"UF"}),Object(w.jsx)(P.Column,{field:"cidade",header:"Cidade",filter:!0,filterPlaceholder:"Busca por Cidade"}),Object(w.jsx)(P.Column,{field:"tabela_precos",header:"Tabela"}),Object(w.jsx)(P.Column,{body:function(e){return Object(w.jsx)(c.a.Fragment,{children:Object(w.jsx)(p.Button,{label:"Selecionar",onClick:function(){return function(e){Object(I.confirmDialog)({message:"Itens nao salvos no carrinho serao apagados. Confirma alteracao?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return x(e.id,e.nome)}})}(e)}})})}})]})})})},z=o(74),F=o(17),q=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),o=t[0],a=t[1],r=k("token",null),i=Object(u.a)(r,2),s=i[0],l=(i[1],k("clienteId",null)),d=Object(u.a)(l,2)[1],j=k("clienteNome",null),b=Object(u.a)(j,2)[1],h=k("carrinhoId",null),O=Object(u.a)(h,2),f=O[0],v=O[1],x=Object(n.useState)(!1),C=Object(u.a)(x,2),_=C[0],N=C[1],y=Object(n.useRef)(null),S=k("isRep",null),T=Object(u.a)(S,1)[0],E=function(){m()({method:"GET",url:"https://greencomapi.azurewebsites.net/pedidos",headers:{Authorization:"Token "+s}}).then((function(e){a(e.data.pedidos)}))};Object(n.useEffect)((function(){E(),document.title="Greenish B2B | Pedidos"}),[]);var q=function(e,t,o){m()({method:"GET",url:g+"/pedidos/retoma/"+e,headers:{Authorization:"Token "+s},params:{carrinhoAtualId:f}}).then((function(n){n.data.confirmed?(v(e),d(t),b(o),window.location.href="/carrinho"):y.current.show([{severity:"error",summary:n.data.message,sticky:!1}])}))};return Object(w.jsxs)("div",{children:[Object(w.jsx)(B.Messages,{ref:y}),Object(w.jsx)(F.Dialog,{title:"Processando",visible:_,onHide:function(){return""},children:Object(w.jsx)(z.ProgressSpinner,{})}),Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)(A.DataTable,{value:o,children:[Object(w.jsx)(P.Column,{field:"id",header:"ID",filter:!0,filterPlaceholder:"Busca por ID"}),Object(w.jsx)(P.Column,{field:"cliente__nome",header:"Cliente",filter:!0,filterPlaceholder:"Busca por Cliente"}),Object(w.jsx)(P.Column,{field:"valor_total",header:"Valor"}),Object(w.jsx)(P.Column,{field:"qtd_total",header:"Qtd"}),Object(w.jsx)(P.Column,{field:"liberado_rep",header:"Liberado",body:function(e){return Object(w.jsx)(c.a.Fragment,{children:e.liberado_rep?Object(w.jsx)(w.Fragment,{children:"Sim"}):Object(w.jsx)(w.Fragment,{children:"N\xe3o"})})}}),Object(w.jsx)(P.Column,{field:"enviado_fabrica",header:"Enviado",body:function(e){return Object(w.jsx)(c.a.Fragment,{children:e.enviado_fabrica?Object(w.jsx)(w.Fragment,{children:"Sim"}):Object(w.jsx)(w.Fragment,{children:"N\xe3o"})})}}),Object(w.jsx)(P.Column,{field:"codigo_erp",header:"Codigo Ondas"}),Object(w.jsx)(P.Column,{header:"Acoes",body:function(e){return Object(w.jsxs)(c.a.Fragment,{children:[e.liberado_rep?Object(w.jsx)(w.Fragment,{}):Object(w.jsx)(p.Button,{label:"Alterar",onClick:function(){return function(e){Object(I.confirmDialog)({message:"Itens nao salvos no carrinho serao apagados. Confirma alteracao?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return q(e.id,e.cliente__id,e.cliente__nome)}})}(e)}}),e.liberado_rep?Object(w.jsx)(w.Fragment,{}):e.liberado_cliente&&T?Object(w.jsx)(p.Button,{label:"Processar",onClick:function(){return function(e){N(!0),m()({method:"GET",url:g+"/pedidos/processa/"+e.id,headers:{Authorization:"Token "+s}}).then((function(e){N(!1),e.data.confirmed?E():y.current.show([{severity:"error",summary:e.data.message,sticky:!0}])}))}(e)}}):Object(w.jsx)(w.Fragment,{})]})}})]})})]})},D=function(){var e=k("token",null),t=Object(u.a)(e,2),o=t[0],a=(t[1],k("carrinhoId",null)),r=Object(u.a)(a,2),i=r[0],s=(r[1],Object(n.useRef)(null)),l=Object(n.useState)([]),d=Object(u.a)(l,2),j=d[0],b=d[1];Object(n.useEffect)((function(){h(),document.title="Greenish B2B | Promocoes"}),[]);var h=function(){m()({method:"GET",headers:{Authorization:"Token "+o},url:"https://greencomapi.azurewebsites.net/promocoes"}).then((function(e){b(e.data.promocoes),console.log(e.data.promocoes)}))};return Object(w.jsxs)("div",{children:[Object(w.jsx)(B.Messages,{ref:s}),Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)(A.DataTable,{value:j,children:[Object(w.jsx)(P.Column,{field:"descricao",header:"Promocao"}),Object(w.jsx)(P.Column,{header:"Acoes",body:function(e){var t=e.condicoes.slice().map((function(t,n){return Object(w.jsx)(p.Button,{className:"p-mr-2",label:e.tipo_condicao+" - "+t.condicao,onClick:function(){return function(e,t){var n=g+"/promocoes/"+i;m()({method:"GET",url:n,headers:{Authorization:"Token "+o},params:{id_promocao:e,id_condicao:t}}).then((function(e){s.current.show([{severity:"success",summary:"Promo\xe7\xe3o computada com sucesso",sticky:!1}])}))}(e.id_promocao,t.id)}})}));return Object(w.jsx)(c.a.Fragment,{children:t})}})]})}),Object(w.jsx)(p.Button,{className:"p-d-block p-mx-auto p-mt-6",label:"Remover Promo\xe7\xf5es",onClick:function(){return function(){var e=g+"/promocoes/remove/"+i;m()({method:"GET",headers:{Authorization:"Token "+o},url:e}).then((function(e){s.current.show([{severity:"success",summary:"Promo\xe7\xf5es Removidas com sucesso",sticky:!1}])}))}()}})]})};o(31);function G(e){var t=Object(n.useState)(""),o=Object(u.a)(t,2),c=o[0],a=o[1],r=Object(n.useState)(""),i=Object(u.a)(r,2),s=i[0],l=i[1],d=Object(n.useState)(""),j=Object(u.a)(d,2),b=j[0],h=j[1],O=k("token",null),f=Object(u.a)(O,2),v=f[0],x=(f[1],Object(n.useState)(!1)),C=Object(u.a)(x,2),_=C[0],N=C[1],y=Object(n.useRef)(null);Object(n.useEffect)((function(){document.title="Greenish B2B | Conta"}),[]);return Object(w.jsxs)("div",{children:[Object(w.jsxs)(F.Dialog,{title:"Alterar Senha",visible:_,onHide:function(){return N(!1)},children:[Object(w.jsx)(B.Messages,{ref:y}),Object(w.jsx)("h5",{children:"Senha Atual"}),Object(w.jsx)(S.Password,{value:c,onChange:function(e){return a(e.target.value)},feedback:!1}),Object(w.jsx)("h5",{children:"Senha Nova"}),Object(w.jsx)(S.Password,{value:s,onChange:function(e){return l(e.target.value)},feedback:!1}),Object(w.jsx)("h5",{children:"Confirme a Nova Senha"}),Object(w.jsx)(S.Password,{value:b,onChange:function(e){return h(e.target.value)},feedback:!1}),Object(w.jsx)("h5",{}),Object(w.jsx)(p.Button,{label:"Confirmar",onClick:function(){return function(){if(s===b){var e={senhaNova:s,senhaAtual:c},t={headers:{Authorization:"Token "+v}};m.a.post(g+"/change_password/",e,t).then((function(e){e.data.confirmed?(localStorage.clear(),window.location.href="/login"):y.current.show([{severity:"error",summary:e.data.message,sticky:!1}])}))}else y.current.show([{severity:"error",summary:"Confirmacao de nova senha invalida",sticky:!1}]);a(""),l(""),h("")}()}})]}),Object(w.jsx)(p.Button,{label:"Alterar Senha",onClick:function(){return N(!0)}}),Object(w.jsx)(p.Button,{label:"Logout",onClick:function(){return function(){var e={headers:{Authorization:"Token "+v}};m.a.get(g+"/accounts/logout",e).then((function(e){localStorage.clear(),window.location.href="/"}))}()}})]})}var R=o(38),L=o(28),M=o(20);function J(e){var t=Object(n.useState)(!1),o=Object(u.a)(t,2),c=o[0],a=o[1],r=Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:e.produto.produto__descricao}),Object(w.jsx)("p",{children:e.produto.produto__produto+" - "+e.produto.produto__linha+" - R$"+e.produto.preco})]});return Object(w.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(w.jsxs)(L.Card,{header:r,children:[Object(w.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"}),Object(w.jsx)("div",{className:"p-grid",children:Object(w.jsxs)("div",{className:"p-field p-col-12 p-md-3",children:[Object(w.jsx)(p.Button,{label:"Detalhes",icon:"pi pi-external-link",onClick:function(){a(!0)}}),Object(w.jsx)(F.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:c,style:{width:"75vw"},onHide:function(){a(!1)},children:Object(w.jsxs)("div",{className:"p-grid",children:[Object(w.jsx)("div",{className:"p-col",children:Object(w.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(w.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(w.jsx)(U,{produto:e.produto})})]})})]})})]})})}function U(e){var t=Object(n.useState)(e.produto),o=Object(u.a)(t,1)[0],c=Object(n.useState)(""),a=Object(u.a)(c,2),r=a[0],i=a[1],s=Object(n.useState)({}),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Object(n.useState)(Object(w.jsx)("div",{})),h=Object(u.a)(b,2),O=h[0],f=h[1],v=k("token",null),x=Object(u.a)(v,2),_=x[0],N=(x[1],k("clienteId",null)),y=Object(u.a)(N,1)[0],S=k("carrinhoId",null),T=Object(u.a)(S,2),I=T[0],A=T[1],P=Object(n.useRef)(null),E=C(o.produto__produto,r).dadosPeriodo;Object(n.useEffect)((function(){var e={};for(var t in E){var n=E[t].cor,c=new Array(o.produto__qtd_tamanhos).fill(0);e[n]=c}j(e)}),[E]),Object(n.useEffect)((function(){if(""!==r){var e=E.map((function(e){return Object(w.jsx)(H,{dados:e,pedido:d,setPedido:j})}));f(e)}}),[d]);return Object(w.jsxs)("div",{children:[Object(w.jsx)(B.Messages,{ref:P}),Object(w.jsx)(M.Dropdown,{id:"dropdown",value:r,options:JSON.parse(e.produto.produto__periodos),onChange:function(e){return i(e.value)}}),Object(w.jsxs)("div",{className:"p-grid",children:[Object(w.jsx)("div",{className:"p-col",children:"TIPO"}),Object(w.jsx)("div",{className:"p-col",children:"COR"}),function(e){return JSON.parse(e.produto.produto__tamanhos).map((function(e){return Object(w.jsx)("div",{className:"p-col-1",children:e})}))}(e)]}),O,Object(w.jsx)(p.Button,{label:"Adicionar",onClick:function(){var e=0;for(var t in d){e+=d[t].reduce((function(e,t){return e+t}),0)}var n={produto:o,periodo:r,qtds:d,qtd_total:e,clienteId:y,carrinhoId:I},c={headers:{Authorization:"Token "+_}};console.log(n),console.log(c.headers),e>0?m.a.post(g+"/carrinho/",n,c).then((function(e){e.data.confirmed?(P.current.show([{severity:"success",summary:e.data.message,sticky:!0}]),A(e.data.carrinhoId)):P.current.show([{severity:"error",summary:e.data.message,sticky:!0}])})).catch((function(e){console.log(e.message)})):P.current.show([{severity:"error",summary:"Quantidade deve ser maior que 0",sticky:!1}])}})]})}function H(e){var t=function(e,t,o){var n=t.pedido;n[t.dados.cor][o]=e,t.setPedido(n)};return Object(w.jsxs)("div",{className:"p-grid",children:[Object(w.jsx)("div",{className:"p-col",children:e.dados.desc_liberacao}),Object(w.jsx)("div",{className:"p-col",children:e.dados.cor+" - "+e.dados.desc_cor}),function(e){var o=[];if(0===Object.keys(e.pedido).length)return o.map((function(e){return e}));var n=function(){var n=c;e.dados.liberacao?o.push(Object(w.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(w.jsx)(R.InputNumber,{min:0,id:e.dados.cor+n,value:e.pedido[e.dados.cor][n],onValueChange:function(o){return t(o.value,e,n)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"})})):(console.log(e.dados.qtds),o.push(Object(w.jsx)("div",{className:"p-col-1 p-mt-4",children:Object(w.jsxs)("span",{className:"p-float-label",children:[Object(w.jsx)(R.InputNumber,{max:e.dados.qtds[n],min:0,id:e.dados.cor+n,value:e.pedido[e.dados.cor][n],onValueChange:function(o){return t(o.value,e,n)},mode:"decimal",showButtons:!0,buttonLayout:"vertical",style:{width:"2.5em"},decrementButtonClassName:"p-button-secondary",incrementButtonClassName:"p-button-secondary",incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus"}),Object(w.jsx)("label",{htmlFor:e.dados.cor+n,children:e.dados.qtds[n]})]})})))};for(var c in e.dados.qtds)n();return o.map((function(e){return e}))}(e)]})}var $=o(75);function V(){var e=Object(n.useState)(Object(w.jsx)("div",{})),t=Object(u.a)(e,2),o=t[0],c=t[1],a=Object(n.useState)(0),r=Object(u.a)(a,2),i=r[0],s=r[1],l=Object(n.useState)(12),d=Object(u.a)(l,2),j=d[0],b=d[1],h=Object(n.useState)(0),O=Object(u.a)(h,2),v=O[0],C=O[1],_=k("token",null),N=Object(u.a)(_,2),y=(N[0],N[1],k("colecao","Todas")),S=Object(u.a)(y,2),B=S[0],T=S[1],I=k("periodo",null),A=Object(u.a)(I,2),P=A[0],E=A[1],z=k("clienteId",null),q=Object(u.a)(z,1)[0],D=k("tamColuna",2),G=Object(u.a)(D,2),R=G[0],L=G[1],U=Object(n.useState)("p-col-12 p-md-6 p-lg-"+R),H=Object(u.a)(U,2),V=H[0],Q=H[1],K=Object(n.useState)(!1),W=Object(u.a)(K,2),X=W[0],Y=W[1],Z=k("colecoes",[]),ee=Object(u.a)(Z,1)[0],te=k("periodos",[]),oe=Object(u.a)(te,1)[0];Object(n.useEffect)((function(){document.title="Greenish B2B | Produtos"}),[]);var ne=function(e,t,o){var c=Object(n.useState)({}),a=Object(u.a)(c,2),r=a[0],i=a[1],s=Object(f.g)(),l=k("token",null),d=Object(u.a)(l,2),j=d[0];return d[1],Object(n.useEffect)((function(){var n=x.a.parse(window.location.search),c=g+s.pathname+"/",a=e;"Todas"===a&&(a=null),m()({method:"GET",url:c,headers:{Authorization:"Token "+j},params:{query:n.query,colecao:a,periodo:t,clienteId:o}}).then((function(e){i(e.data)}))}),[s,e,t,o]),{produtos:r}}(B,P,q).produtos;return Object(n.useEffect)((function(){if("lista"in ne){C(ne.lista.length);var e,t=ne.lista.slice(i,i+j);e=t.map((function(e,t){return Object(w.jsx)("div",{className:V,children:Object(w.jsx)(J,{produto:e},t)})})),c(e),window.scrollTo(0,0)}}),[ne,V,i,j]),Object(n.useEffect)((function(){Q("p-col-12 p-md-6 p-lg-"+R)}),[R]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(p.Button,{label:"Filtrar",onClick:function(){Y(!0)},className:"p-mr-2"}),Object(w.jsx)(F.Dialog,{header:"Filtros",visible:X,style:{width:"75vw"},onHide:function(){Y(!1)},children:Object(w.jsxs)("div",{className:"p-grid",children:[Object(w.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(w.jsx)("h3",{children:"Colecao"}),Object(w.jsx)(M.Dropdown,{id:"dropdown",value:B,options:ee,onChange:function(e){return T(e.value)}})]}),Object(w.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(w.jsx)("h3",{children:"Periodo"}),Object(w.jsx)(M.Dropdown,{id:"dropdown",value:P,options:oe,onChange:function(e){return E(e.value)}})]}),Object(w.jsxs)("div",{className:"p-col-12 p-md-6 p-lg-2",children:[Object(w.jsx)("h3",{children:"Coluna"}),Object(w.jsx)(M.Dropdown,{id:"dropdown",value:R,options:[2,3,4],onChange:function(e){return L(e.value)}})]})]})})]}),Object(w.jsx)("div",{className:"p-grid",children:o}),Object(w.jsx)($.Paginator,{first:i,rows:j,totalRecords:v,rowsPerPageOptions:[12,24,36],onPageChange:function(e){s(e.first),b(e.rows)}})]})}function Q(e){var t=Object(n.useState)(!1),o=Object(u.a)(t,2),c=o[0],a=o[1],r=k("token",null),i=Object(u.a)(r,2),s=i[0],l=(i[1],function(){a(!1)}),d=function(){m()({method:"GET",url:g+"/carrinho/delete_item/"+e.produto.id,headers:{Authorization:"Token "+s}}).then((function(t){e.forceUpdate()}))},j=e.produto.preco-e.produto.desconto,b=e.produto.preco,h=Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:e.produto.produto__descricao}),Object(w.jsx)("p",{children:e.produto.produto__produto+" - "+e.produto.qtd_item+" - R$"+e.produto.valor_item}),e.produto.desconto>0?Object(w.jsx)("p",{children:"Pre\xe7o: De R$"+b+" por R$"+j}):Object(w.jsx)("p",{children:"Pre\xe7o: R$"+e.produto.preco})]});return Object(w.jsx)("div",{className:"p-shadow-2 p-m-2",children:Object(w.jsxs)(L.Card,{header:h,children:[Object(w.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"}),Object(w.jsxs)("div",{className:"p-grid",children:[Object(w.jsx)(p.Button,{label:"Alterar",onClick:function(){a(!0)},className:"p-mr-2"}),Object(w.jsx)(p.Button,{label:"Remover",onClick:function(){Object(I.confirmDialog)({message:"Confirma a exclusao do produto?",header:"Confirmacao",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"Nao",accept:function(){return d()}})}}),Object(w.jsx)("div",{className:"p-field p-col-12 p-md-3",children:Object(w.jsx)(F.Dialog,{header:e.produto.produto__produto,maximizable:!0,visible:c,style:{width:"75vw"},onHide:function(){return l()},children:Object(w.jsxs)("div",{className:"p-grid",children:[Object(w.jsx)("div",{className:"p-col",children:Object(w.jsx)("img",{top:!0,width:"100%",src:e.produto.produto__url_imagem,alt:"Sem Imagem"})}),Object(w.jsx)("div",{className:"p-col-fixed",style:{width:"500px"},children:Object(w.jsx)(K,{periodoAtual:e.periodoAtual,produto:e.produto,forceUpdate:e.forceUpdate,hideModal:l})})]})})})]})]})})}function K(e){var t=Object(n.useState)(e.produto),o=Object(u.a)(t,1)[0],c=Object(n.useState)(""),a=Object(u.a)(c,2),r=a[0],i=a[1],s=Object(n.useState)({}),l=Object(u.a)(s,2),d=l[0],j=l[1],b=Object(n.useState)(function(e,t){var o=(e=JSON.parse(e)).indexOf(t);o>-1&&e.splice(o,1);(o=e.indexOf("Pre-selecionados"))>-1&&e.splice(o,1);return e}(o.produto__periodos,e.periodoAtual)),h=Object(u.a)(b,1)[0],O=Object(n.useState)(!1),f=Object(u.a)(O,2),v=f[0],x=f[1],_=Object(n.useRef)(null),N=Object(n.useState)(Object(w.jsx)("div",{})),y=Object(u.a)(N,2),S=y[0],T=y[1],I=k("clienteId",null),A=Object(u.a)(I,1)[0],P=k("carrinhoId",null),E=Object(u.a)(P,1)[0],z=k("token",null),F=Object(u.a)(z,2),q=F[0],D=(F[1],C(o.produto__produto,r).dadosPeriodo);Object(n.useEffect)((function(){var e=R(D,o);j(e)}),[D]),Object(n.useEffect)((function(){v?(_.current.show([{severity:"error",summary:"Periodo selecionado nao tem disponivel todas as quantidades digitadas - Selecione outro periodo",sticky:!1}]),i(null)):_.current.clear()}),[v,r]),Object(n.useEffect)((function(){if(""!==r){var e=D.map((function(e){return Object(w.jsx)(W,{dados:e,pedido:d})}));T(e)}}),[d]);var G=function(e,t){var o=[],n=!1;for(var c in e){t[c]-e[c]<0?(o.push(e[c]),n=!0):o.push(e[c])}return[o,n]},R=function(e,t){var o={},n=JSON.parse(t.qtds),c=!1;for(var a in e){var r=e[a],i=r.cor,s=new Array(t.produto__qtd_tamanhos).fill(0);if(i in n){if(r.liberacao)s=n[i];else{var l=G(n[i],r.qtds),d=Object(u.a)(l,2);s=d[0],d[1]&&(c=!0)}o[i]=s}}return x(c),o};return Object(w.jsxs)("div",{children:[Object(w.jsx)(B.Messages,{ref:_}),Object(w.jsx)(M.Dropdown,{id:"dropdown",value:r,options:h,onChange:function(e){return i(e.value)}}),Object(w.jsxs)("div",{className:"p-grid",children:[Object(w.jsx)("div",{className:"p-col",children:"COR"}),JSON.parse(o.produto__tamanhos).map((function(e){return Object(w.jsx)("div",{className:"p-col-1",children:e})}))]}),S,Object(w.jsx)(p.Button,{label:"Alterar",onClick:function(){var t=0;for(var n in d){t+=d[n].reduce((function(e,t){return e+t}),0)}var c={produto:o,periodo:r,qtds:d,qtd_total:t,clienteId:A,carrinhoId:E},a={headers:{Authorization:"Token "+q}};t>0&&m.a.post(g+"/carrinho/update/"+o.id,c,a).then((function(t){t.data.confirmed?(_.current.show([{severity:"success",summary:t.data.message,sticky:!0}]),e.forceUpdate(),e.hideModal()):_.current.show([{severity:"error",summary:t.data.message,sticky:!0}])})).catch((function(e){console.log(e.message)}))}})]})}function W(e){var t=[];if(0===Object.keys(e.pedido).length)return t.map((function(e){return e}));if(e.dados.cor in e.pedido){for(var o in e.dados.qtds){var n=o;t.push(Object(w.jsx)("div",{className:"p-col-1",children:e.pedido[e.dados.cor][n]}))}var c=t.map((function(e){return e}));return Object(w.jsxs)("div",{className:"p-grid",children:[Object(w.jsx)("div",{className:"p-col",children:e.dados.cor+" - "+e.dados.desc_cor}),c]})}return Object(w.jsx)(w.Fragment,{})}var X=o(76);function Y(){var e=Object(n.useState)(Object(w.jsx)("div",{})),t=Object(u.a)(e,2),o=t[0],c=t[1],a=Object(n.useState)(0),r=Object(u.a)(a,2),i=r[0],s=r[1],l=k("clienteId",null),d=Object(u.a)(l,2),j=d[0],b=d[1],h=k("clienteNome",null),O=Object(u.a)(h,2),f=O[0],v=O[1],x=k("carrinhoId",null),C=Object(u.a)(x,2),_=C[0],N=C[1],y=k("token",null),S=Object(u.a)(y,2),B=S[0],T=(S[1],k("isRep",null)),I=Object(u.a)(T,2),A=I[0],P=(I[1],Object(n.useState)(!1)),E=Object(u.a)(P,2),z=E[0],q=E[1],D=function(e,t){var o=Object(n.useState)([]),c=Object(u.a)(o,2),a=c[0],r=c[1],i=Object(n.useState)(0),s=Object(u.a)(i,2),l=s[0],d=s[1],j=Object(n.useState)(0),b=Object(u.a)(j,2),p=b[0],h=b[1],O=Object(n.useState)(""),f=Object(u.a)(O,2),v=f[0],x=f[1],g=Object(n.useState)(null),C=Object(u.a)(g,2),w=C[0],_=C[1],N=k("carrinhoId",null),y=Object(u.a)(N,2),S=y[0],B=y[1],T=k("token",null),I=Object(u.a)(T,2),A=I[0];return I[1],Object(n.useEffect)((function(){var e={carrinhoId:S,clienteId:t};m()({method:"GET",headers:{Authorization:"Token "+A},url:"https://greencomapi.azurewebsites.net/carrinho",params:e}).then((function(e){e.data.confirmed&&B(e.data.carrinhoId),r(e.data.dados),x(e.data.observacoes),_(e.data.message),d(e.data.valor_total),h(e.data.qtd_total)}))}),[e,S,v,l,p]),{carrinho:a,emptyMessage:w,observacoes:v,valorTotal:l,qtdTotal:p}}(i,j),G=D.carrinho,R=D.emptyMessage,L=D.observacoes,M=D.valorTotal,J=D.qtdTotal,U=Object(n.useState)(""),H=Object(u.a)(U,2),$=H[0],V=H[1],Q=function(){s((function(e){return e+1}))};Object(n.useEffect)((function(){document.title="Greenish B2B | Carrinho"}),[]),Object(n.useEffect)((function(){V(L)}),[L]),Object(n.useEffect)((function(){var e=G,t=Object(w.jsx)("div",{className:"p-col-12 p-md-6 p-lg-3"});e.length>0&&(t=e.map((function(e,t){return Object(w.jsx)("div",{className:"p-col-12 p-md-12 p-lg-12",children:Object(w.jsx)(Z,{forceUpdate:Q,periodoAtual:e.periodo,qtd_periodo:e.qtd_periodo,valor_periodo:e.valor_periodo,itens:e.itens},t)})}))),c(t)}),[G,R,_,i]);return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{children:R}),Object(w.jsx)("p",{children:"Cliente: "+f+" | Valor Total: "+M+" | Quantidade Total: "+J}),Object(w.jsx)(p.Button,{label:"Salvar",onClick:function(){return q(!0)},className:"p-mr-2"}),Object(w.jsxs)(F.Dialog,{header:"Observacoes",visible:z,onHide:function(){return q(!1)},children:[Object(w.jsx)("div",{children:Object(w.jsx)(X.InputTextarea,{rows:10,cols:50,value:$,onChange:function(e){return V(e.target.value)}})}),Object(w.jsx)(p.Button,{label:"Salvar",onClick:function(){m()({method:"GET",url:g+"/pedidos/salva/"+_+"/",headers:{Authorization:"Token "+B},params:{observacoes:$}}).then((function(e){e.data.confirmed?(A?(b(null),v(null),N(null)):N(null),window.location.href="/pedidos"):console.log(e.data)}))},className:"p-mr-2"})]}),Object(w.jsx)("div",{className:"p-grid",children:o})]})}function Z(e){var t,o=e.itens.slice();return t=o.map((function(t,o){return Object(w.jsx)("div",{className:"p-col-6 p-md-6 p-lg-2",children:Object(w.jsx)(Q,{periodoAtual:e.periodoAtual,forceUpdate:e.forceUpdate,produto:t},o)})})),Object(w.jsx)(L.Card,{title:e.periodoAtual+" - "+e.qtd_periodo+" - "+e.valor_periodo,children:Object(w.jsx)("div",{className:"p-grid",children:t})})}var ee=function(){var e=k("token",null),t=Object(u.a)(e,2),o=t[0],a=(t[1],k("carrinhoId",null)),r=Object(u.a)(a,2),i=r[0],s=(r[1],Object(n.useRef)(null)),l=Object(n.useState)([]),d=Object(u.a)(l,2),j=d[0],b=d[1];Object(n.useEffect)((function(){h(),document.title="Greenish B2B | Promocoes"}),[]);var h=function(){m()({method:"GET",headers:{Authorization:"Token "+o},url:"https://greencomapi.azurewebsites.net/promocoes"}).then((function(e){b(e.data.promocoes),console.log(e.data.promocoes)}))};return Object(w.jsxs)("div",{children:[Object(w.jsx)(B.Messages,{ref:s}),Object(w.jsx)("div",{className:"card",children:Object(w.jsxs)(A.DataTable,{value:j,children:[Object(w.jsx)(P.Column,{field:"descricao",header:"Promocao"}),Object(w.jsx)(P.Column,{header:"Acoes",body:function(e){var t=e.condicoes.slice().map((function(t,n){return Object(w.jsx)(p.Button,{className:"p-mr-2",label:e.tipo_condicao+" - "+t.condicao,onClick:function(){return function(e,t){var n=g+"/promocoes/"+i;m()({method:"GET",url:n,headers:{Authorization:"Token "+o},params:{id_promocao:e,id_condicao:t}}).then((function(e){s.current.show([{severity:"success",summary:"Promo\xe7\xe3o computada com sucesso",sticky:!1}])}))}(e.id_promocao,t.id)}})}));return Object(w.jsx)(c.a.Fragment,{children:t})}})]})}),Object(w.jsx)(p.Button,{className:"p-d-block p-mx-auto p-mt-6",label:"Remover Promo\xe7\xf5es",onClick:function(){return function(){var e=g+"/promocoes/remove/"+i;m()({method:"GET",headers:{Authorization:"Token "+o},url:e}).then((function(e){s.current.show([{severity:"success",summary:"Promo\xe7\xf5es Removidas com sucesso",sticky:!1}])}))}()}})]})},te=o(44),oe=function(e){Object(l.a)(o,e);var t=Object(d.a)(o);function o(e){var n;return Object(i.a)(this,o),(n=t.call(this,e)).state={},n}return Object(s.a)(o,[{key:"verificaLogin",value:function(){var e=JSON.parse(localStorage.getItem("loggedin"));return null==e&&(e=!1),e}},{key:"render",value:function(){var e=this.verificaLogin();return Object(w.jsx)("div",{children:Object(w.jsx)("div",{children:Object(w.jsx)(te.a,{children:Object(w.jsxs)("div",{children:[Object(w.jsx)("nav",{children:Object(w.jsx)(N,{loggedIn:e})}),Object(w.jsxs)(f.d,{children:[Object(w.jsx)(f.b,{path:"/login",component:T}),Object(w.jsx)(f.b,{path:"/clientes",component:E}),Object(w.jsx)(f.b,{path:"/pedidos",component:q}),Object(w.jsx)(f.b,{path:"/promocoes",component:D}),Object(w.jsx)(f.b,{path:"/conta",component:G}),Object(w.jsx)(f.b,{path:"/carrinho",component:Y}),Object(w.jsx)(f.b,{path:"/busca",component:V}),Object(w.jsx)(f.b,{path:"/teste",component:ee}),Object(w.jsx)(f.b,{path:"/:linha/:categoria/:subcategoria",children:e?Object(w.jsx)(V,{}):Object(w.jsx)(f.a,{to:"/login"})}),Object(w.jsx)(f.b,{path:"/:linha/:categoria",children:e?Object(w.jsx)(V,{}):Object(w.jsx)(f.a,{to:"/login"})}),Object(w.jsx)(f.b,{path:"/",component:y})]})]})})})})}}]),o}(c.a.Component),ne=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,166)).then((function(t){var o=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;o(e),n(e),c(e),a(e),r(e)}))};o(162),o(163),o(164);r.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(oe,{})}),document.getElementById("root")),ne()},81:function(e,t,o){}},[[165,1,2]]]);
//# sourceMappingURL=main.53b30973.chunk.js.map